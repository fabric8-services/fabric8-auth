/home/shane/go/src/github.com/fabric8-services/fabric8-auth/bin/auth -migrateDatabase
{"level":"info","msg":"Running as user name 'shane' with UID 1000.","pkg":"main","time":"2017-08-18 10:14:50","username":"shane","uuid":"1000"}
{"gid":"1000","groupname":"shane","level":"info","msg":"Running as as group 'shane' with GID 1000.","pkg":"main","time":"2017-08-18 10:14:50"}
{"current_version":4,"level":"info","msg":"Current version 4. Nothing to update.","next_version":5,"pkg":"migration","time":"2017-08-18 10:14:50"}
INFO: Running test: test-integration-no-coverage
AUTH_DEVELOPER_MODE_ENABLED=1 AUTH_RESOURCE_DATABASE=1 AUTH_RESOURCE_UNIT_TEST=0 go test -v github.com/fabric8-services/fabric8-auth github.com/fabric8-services/fabric8-auth/account github.com/fabric8-services/fabric8-auth/account/tenant github.com/fabric8-services/fabric8-auth/auth github.com/fabric8-services/fabric8-auth/authorization github.com/fabric8-services/fabric8-auth/configuration github.com/fabric8-services/fabric8-auth/controller github.com/fabric8-services/fabric8-auth/convert github.com/fabric8-services/fabric8-auth/criteria github.com/fabric8-services/fabric8-auth/errors github.com/fabric8-services/fabric8-auth/goasupport github.com/fabric8-services/fabric8-auth/goasupport/conditional_request github.com/fabric8-services/fabric8-auth/gormsupport github.com/fabric8-services/fabric8-auth/gormsupport/cleaner github.com/fabric8-services/fabric8-auth/jsonapi github.com/fabric8-services/fabric8-auth/log github.com/fabric8-services/fabric8-auth/login github.com/fabric8-services/fabric8-auth/login/tokencontext github.com/fabric8-services/fabric8-auth/migration github.com/fabric8-services/fabric8-auth/models github.com/fabric8-services/fabric8-auth/path github.com/fabric8-services/fabric8-auth/query/simple github.com/fabric8-services/fabric8-auth/resource github.com/fabric8-services/fabric8-auth/rest github.com/fabric8-services/fabric8-auth/space github.com/fabric8-services/fabric8-auth/space/authz github.com/fabric8-services/fabric8-auth/token github.com/fabric8-services/fabric8-auth/tool/auth-cli github.com/fabric8-services/fabric8-auth/tool/wit-cli
?   	github.com/fabric8-services/fabric8-auth	[no test files]
=== RUN   TestRunIdentityBlackBoxTest
=== RUN   TestExistsIdentity
=== RUN   TestExistsIdentity/identity_exists
time="2017-08-18T10:14:55+07:00" level=info msg="Identity created!" identity_id=9c1cd61c-fa41-4fca-94df-26336c573872 pkg=account req_id=fEZwz4BS 
=== RUN   TestExistsIdentity/identity_doesn't_exist
time="2017-08-18T10:14:55+07:00" level=info msg="Deleting entities from 'identities' table with key 9c1cd61c-fa41-4fca-94df-26336c573872" hook_name="mighti:record" key=9c1cd61c-fa41-4fca-94df-26336c573872 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
[info] removing callback `mighti:record` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestExistsIdentity (0.02s)
    --- PASS: TestExistsIdentity/identity_exists (0.01s)
    --- PASS: TestExistsIdentity/identity_doesn't_exist (0.00s)
=== RUN   TestOKToDelete
time="2017-08-18T10:14:55+07:00" level=info msg="Identity created!" identity_id=672c3d15-7cf9-4927-b535-7f97ed6524c9 pkg=account req_id=fEZwz4BS 
time="2017-08-18T10:14:55+07:00" level=info msg="Identity created!" identity_id=b193e492-fd3c-4d6f-9500-05bf48287742 pkg=account req_id=fEZwz4BS 
time="2017-08-18T10:14:55+07:00" level=info msg="Deleting entities from 'identities' table with key b193e492-fd3c-4d6f-9500-05bf48287742" hook_name="mighti:record-f6dd11aa-bb86-4c40-a1ed-28f0513915bc" key=b193e492-fd3c-4d6f-9500-05bf48287742 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:55+07:00" level=info msg="Deleting entities from 'identities' table with key 672c3d15-7cf9-4927-b535-7f97ed6524c9" hook_name="mighti:record-f6dd11aa-bb86-4c40-a1ed-28f0513915bc" key=672c3d15-7cf9-4927-b535-7f97ed6524c9 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
[info] removing callback `mighti:record-f6dd11aa-bb86-4c40-a1ed-28f0513915bc` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestOKToDelete (0.02s)
=== RUN   TestOKToLoad
time="2017-08-18T10:14:55+07:00" level=info msg="Identity created!" identity_id=7a549319-a15b-40c3-a3c9-a704c5d98c01 pkg=account req_id=fEZwz4BS 
time="2017-08-18T10:14:55+07:00" level=info msg="Deleting entities from 'identities' table with key 7a549319-a15b-40c3-a3c9-a704c5d98c01" hook_name="mighti:record-a865769d-6597-4b5b-8a49-c518a77351a9" key=7a549319-a15b-40c3-a3c9-a704c5d98c01 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
[info] removing callback `mighti:record-a865769d-6597-4b5b-8a49-c518a77351a9` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestOKToLoad (0.01s)
=== RUN   TestOKToSave
time="2017-08-18T10:14:55+07:00" level=info msg="Identity created!" identity_id=99182ac0-e0af-4633-baf5-5a31c3d7d11c pkg=account req_id=fEZwz4BS 
time="2017-08-18T10:14:55+07:00" level=info msg="Deleting entities from 'identities' table with key 99182ac0-e0af-4633-baf5-5a31c3d7d11c" hook_name="mighti:record-1744972b-5dfd-4398-bcc7-9494b9e77bc3" key=99182ac0-e0af-4633-baf5-5a31c3d7d11c pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
[info] removing callback `mighti:record-1744972b-5dfd-4398-bcc7-9494b9e77bc3` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestOKToSave (0.01s)
--- PASS: TestRunIdentityBlackBoxTest (0.08s)
=== RUN   TestRunUserBlackBoxTest
=== RUN   TestExistsUser
=== RUN   TestExistsUser/user_exists
=== RUN   TestExistsUser/user_doesn't_exist
time="2017-08-18T10:14:55+07:00" level=info msg="Deleting entities from 'users' table with key 8b6990ab-7ad4-40d0-8321-45a979e833c1" hook_name="mighti:record" key=8b6990ab-7ad4-40d0-8321-45a979e833c1 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestExistsUser (0.01s)
    --- PASS: TestExistsUser/user_exists (0.01s)
    --- PASS: TestExistsUser/user_doesn't_exist (0.00s)
=== RUN   TestOKToDelete
time="2017-08-18T10:14:55+07:00" level=info msg="Deleting entities from 'users' table with key 2bffb8dd-b789-48e5-8847-56d63b21e872" hook_name="mighti:record-c63f7c65-4c0f-4426-8596-ce098e8c2bb0" key=2bffb8dd-b789-48e5-8847-56d63b21e872 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
time="2017-08-18T10:14:55+07:00" level=info msg="Deleting entities from 'users' table with key 75eb65a6-f481-4980-82dc-f53d8844dad5" hook_name="mighti:record-c63f7c65-4c0f-4426-8596-ce098e8c2bb0" key=75eb65a6-f481-4980-82dc-f53d8844dad5 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-c63f7c65-4c0f-4426-8596-ce098e8c2bb0` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestOKToDelete (0.03s)
=== RUN   TestOKToLoad
time="2017-08-18T10:14:55+07:00" level=info msg="Deleting entities from 'users' table with key 5adbf990-52fc-4481-91b9-46cfec2bb2d6" hook_name="mighti:record-00f3b7b1-0e59-49ca-920c-bf8809e606fe" key=5adbf990-52fc-4481-91b9-46cfec2bb2d6 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-00f3b7b1-0e59-49ca-920c-bf8809e606fe` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestOKToLoad (0.01s)
=== RUN   TestOKToSave
time="2017-08-18T10:14:55+07:00" level=info msg="Deleting entities from 'users' table with key 2afe9bd4-6179-4766-82fa-43652a96feb3" hook_name="mighti:record-f5e03be2-674c-4fde-a27f-82b5561de305" key=2afe9bd4-6179-4766-82fa-43652a96feb3 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-f5e03be2-674c-4fde-a27f-82b5561de305` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestOKToSave (0.02s)
--- PASS: TestRunUserBlackBoxTest (0.08s)
PASS
ok  	github.com/fabric8-services/fabric8-auth/account	0.174s
?   	github.com/fabric8-services/fabric8-auth/account/tenant	[no test files]
=== RUN   TestAuth
--- SKIP: TestAuth (0.00s)
	require.go:53: Skipping test because environment variable AUTH_RESOURCE_REMOTE is no set.
=== RUN   TestPolicy
--- SKIP: TestPolicy (0.00s)
	require.go:53: Skipping test because environment variable AUTH_RESOURCE_REMOTE is no set.
=== RUN   TestRunStateBlackBoxTest
=== RUN   TestCreateDeleteLoad
time="2017-08-18T10:14:57+07:00" level=info msg="Oauth state reference created successfully" oauth_state_reference_id=46d79bae-0b9c-4daa-a788-961916644348 pkg=auth req_id=foLpn6zf 
time="2017-08-18T10:14:57+07:00" level=info msg="Oauth state reference created successfully" oauth_state_reference_id=f5451585-aa51-4437-8655-5fd9436e7fb7 pkg=auth req_id=foLpn6zf 
time="2017-08-18T10:14:57+07:00" level=error msg="Could not find oauth state reference by state" file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/auth/state.go" func="github.com/fabric8-services/fabric8-auth/auth.(*GormOauthStateReferenceRepository).Load" id=46d79bae-0b9c-4daa-a788-961916644348 line=115 pid=5676 pkg=auth req_id=foLpn6zf 
time="2017-08-18T10:14:57+07:00" level=info msg="Deleting entities from 'oauth_state_references' table with key f5451585-aa51-4437-8655-5fd9436e7fb7" hook_name="mighti:record" key=f5451585-aa51-4437-8655-5fd9436e7fb7 pkg="gormsupport/cleaner.DeleteCreatedEntities" table="oauth_state_references" 
time="2017-08-18T10:14:57+07:00" level=info msg="Deleting entities from 'oauth_state_references' table with key 46d79bae-0b9c-4daa-a788-961916644348" hook_name="mighti:record" key=46d79bae-0b9c-4daa-a788-961916644348 pkg="gormsupport/cleaner.DeleteCreatedEntities" table="oauth_state_references" 
[info] removing callback `mighti:record` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestCreateDeleteLoad (0.02s)
--- PASS: TestRunStateBlackBoxTest (0.02s)
PASS
ok  	github.com/fabric8-services/fabric8-auth/auth	0.028s
FAIL	github.com/fabric8-services/fabric8-auth/authorization [build failed]
=== RUN   TestOpenIDConnectPathOK
--- SKIP: TestOpenIDConnectPathOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestGetKeycloakURLOK
--- SKIP: TestGetKeycloakURLOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestGetKeycloakHttpsURLOK
--- SKIP: TestGetKeycloakHttpsURLOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestGetKeycloakURLForTooShortHostFails
--- SKIP: TestGetKeycloakURLForTooShortHostFails (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestKeycloakRealmInDevModeCanBeOverridden
--- SKIP: TestKeycloakRealmInDevModeCanBeOverridden (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestGetLogLevelOK
--- SKIP: TestGetLogLevelOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestGetTransactionTimeoutOK
--- SKIP: TestGetTransactionTimeoutOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestValidRedirectURLsInDevModeCanBeOverridden
--- SKIP: TestValidRedirectURLsInDevModeCanBeOverridden (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestRedirectURLsForLocalhostRequestAreExcepted
--- SKIP: TestRedirectURLsForLocalhostRequestAreExcepted (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestGetKeycloakEndpointSetByUrlEnvVaribaleOK
--- SKIP: TestGetKeycloakEndpointSetByUrlEnvVaribaleOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestGetKeycloakEndpointAdminDevModeOK
--- SKIP: TestGetKeycloakEndpointAdminDevModeOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestGetKeycloakEndpointAdminSetByEnvVaribaleOK
--- SKIP: TestGetKeycloakEndpointAdminSetByEnvVaribaleOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestGetKeycloakEndpointAuthzResourcesetDevModeOK
--- SKIP: TestGetKeycloakEndpointAuthzResourcesetDevModeOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestGetKeycloakEndpointAuthzResourcesetSetByEnvVaribaleOK
--- SKIP: TestGetKeycloakEndpointAuthzResourcesetSetByEnvVaribaleOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestGetKeycloakEndpointClientsDevModeOK
--- SKIP: TestGetKeycloakEndpointClientsDevModeOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestGetKeycloakEndpoinClientsSetByEnvVaribaleOK
--- SKIP: TestGetKeycloakEndpoinClientsSetByEnvVaribaleOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestGetKeycloakEndpointAuthDevModeOK
--- SKIP: TestGetKeycloakEndpointAuthDevModeOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestGetKeycloakEndpointAuthSetByEnvVaribaleOK
--- SKIP: TestGetKeycloakEndpointAuthSetByEnvVaribaleOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestGetKeycloakEndpointLogoutDevModeOK
--- SKIP: TestGetKeycloakEndpointLogoutDevModeOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestGetKeycloakEndpointLogoutSetByEnvVaribaleOK
--- SKIP: TestGetKeycloakEndpointLogoutSetByEnvVaribaleOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestGetKeycloakEndpointTokenOK
--- SKIP: TestGetKeycloakEndpointTokenOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestGetKeycloakEndpointTokenSetByEnvVaribaleOK
--- SKIP: TestGetKeycloakEndpointTokenSetByEnvVaribaleOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestGetKeycloakEndpointUserInfoOK
--- SKIP: TestGetKeycloakEndpointUserInfoOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestGetKeycloakEndpointUserInfoSetByEnvVaribaleOK
--- SKIP: TestGetKeycloakEndpointUserInfoSetByEnvVaribaleOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestGetKeycloakEndpointEntitlementOK
--- SKIP: TestGetKeycloakEndpointEntitlementOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestGetKeycloakEndpointEntitlementSetByEnvVaribaleOK
--- SKIP: TestGetKeycloakEndpointEntitlementSetByEnvVaribaleOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestGetKeycloakEndpointBrokerOK
--- SKIP: TestGetKeycloakEndpointBrokerOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestGetKeycloakEndpointBrokerSetByEnvVaribaleOK
--- SKIP: TestGetKeycloakEndpointBrokerSetByEnvVaribaleOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestGetKeycloakUserInfoEndpointOK
--- SKIP: TestGetKeycloakUserInfoEndpointOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestGetKeycloakUserInfoEndpointOKrSetByEnvVaribaleOK
--- SKIP: TestGetKeycloakUserInfoEndpointOKrSetByEnvVaribaleOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestGetTokenPrivateKeyFromConfigFile
--- SKIP: TestGetTokenPrivateKeyFromConfigFile (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestGetTokenPublicKeyFromConfigFile
--- SKIP: TestGetTokenPublicKeyFromConfigFile (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestGetMaxHeaderSizeUsingDefaults
--- SKIP: TestGetMaxHeaderSizeUsingDefaults (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestGetMaxHeaderSizeSetByEnvVaribaleOK
--- SKIP: TestGetMaxHeaderSizeSetByEnvVaribaleOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
PASS
ok  	github.com/fabric8-services/fabric8-auth/configuration	0.016s
=== RUN   TestRunLogoutREST
--- SKIP: TestRunLogoutREST (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestCopyExistingKeycloakUserProfileInfo
=== RUN   TestRunCollaboratorsREST
=== RUN   TestAddCollaboratorsOk
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=c3fe60af-e00f-45d2-a883-6ea71585d5a4 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=c3fe60af-e00f-45d2-a883-6ea71585d5a4 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=dbebbf7a-75a6-491c-81ba-e6eb55b15de6 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=dbebbf7a-75a6-491c-81ba-e6eb55b15de6 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=e9dbad48-7289-49eb-8d64-ea0d3e51dd83 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=e9dbad48-7289-49eb-8d64-ea0d3e51dd83 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Space resource created successfully" identity_id=c3fe60af-e00f-45d2-a883-6ea71585d5a4 pkg=space req_id= space_resource_id=2ef42282-4ef1-4ee8-b31f-3ff0f953a0e2 
time="2017-08-18T10:14:58+07:00" level=info msg="Space resource updated successfully" identity_id=c3fe60af-e00f-45d2-a883-6ea71585d5a4 pkg=space req_id= space_resource_id=2ef42282-4ef1-4ee8-b31f-3ff0f953a0e2 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'space_resources' table with key 2ef42282-4ef1-4ee8-b31f-3ff0f953a0e2" hook_name="mighti:record" key=2ef42282-4ef1-4ee8-b31f-3ff0f953a0e2 pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key e9dbad48-7289-49eb-8d64-ea0d3e51dd83" hook_name="mighti:record" key=e9dbad48-7289-49eb-8d64-ea0d3e51dd83 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key dbebbf7a-75a6-491c-81ba-e6eb55b15de6" hook_name="mighti:record" key=dbebbf7a-75a6-491c-81ba-e6eb55b15de6 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key c3fe60af-e00f-45d2-a883-6ea71585d5a4" hook_name="mighti:record" key=c3fe60af-e00f-45d2-a883-6ea71585d5a4 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
[info] removing callback `mighti:record` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestAddCollaboratorsOk (0.04s)
	collaborators_blackbox_test.go:483: Checking collaborators: 
	collaborators_blackbox_test.go:484:   expecting: 
	collaborators_blackbox_test.go:486:   - c3fe60af-e00f-45d2-a883-6ea71585d5a4
	collaborators_blackbox_test.go:488:   got: 
	collaborators_blackbox_test.go:492:   - c3fe60af-e00f-45d2-a883-6ea71585d5a4
	collaborators_blackbox_test.go:483: Checking collaborators: 
	collaborators_blackbox_test.go:484:   expecting: 
	collaborators_blackbox_test.go:486:   - c3fe60af-e00f-45d2-a883-6ea71585d5a4
	collaborators_blackbox_test.go:486:   - dbebbf7a-75a6-491c-81ba-e6eb55b15de6
	collaborators_blackbox_test.go:488:   got: 
	collaborators_blackbox_test.go:492:   - c3fe60af-e00f-45d2-a883-6ea71585d5a4
	collaborators_blackbox_test.go:492:   - dbebbf7a-75a6-491c-81ba-e6eb55b15de6
=== RUN   TestAddCollaboratorsUnauthorizedIfCurrentUserIsNotCollaborator
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=cb69c250-8e1e-4821-ba5d-5ef9e55e3b8b pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=cb69c250-8e1e-4821-ba5d-5ef9e55e3b8b pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=88d84e05-b343-4569-ae6a-35c4ed6ebec7 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=88d84e05-b343-4569-ae6a-35c4ed6ebec7 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=4a110a20-39b0-4703-965e-520a794f9d01 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=4a110a20-39b0-4703-965e-520a794f9d01 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Space resource created successfully" identity_id=cb69c250-8e1e-4821-ba5d-5ef9e55e3b8b pkg=space req_id= space_resource_id=525f9677-ecd6-4729-89ee-7a3593736b80 
time="2017-08-18T10:14:58+07:00" level=info msg="an error occurred in our api" err="[40SVonBB] 401 unauthorized: User not among space collaborators" error_message="[40SVonBB] 401 unauthorized: User not among space collaborators" identity_id=cb69c250-8e1e-4821-ba5d-5ef9e55e3b8b pkg=jsonapi req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'space_resources' table with key 525f9677-ecd6-4729-89ee-7a3593736b80" hook_name="mighti:record-824eabce-ac2b-4a95-9f04-f064921221e2" key=525f9677-ecd6-4729-89ee-7a3593736b80 pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 4a110a20-39b0-4703-965e-520a794f9d01" hook_name="mighti:record-824eabce-ac2b-4a95-9f04-f064921221e2" key=4a110a20-39b0-4703-965e-520a794f9d01 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 88d84e05-b343-4569-ae6a-35c4ed6ebec7" hook_name="mighti:record-824eabce-ac2b-4a95-9f04-f064921221e2" key=88d84e05-b343-4569-ae6a-35c4ed6ebec7 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key cb69c250-8e1e-4821-ba5d-5ef9e55e3b8b" hook_name="mighti:record-824eabce-ac2b-4a95-9f04-f064921221e2" key=cb69c250-8e1e-4821-ba5d-5ef9e55e3b8b pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
[info] removing callback `mighti:record-824eabce-ac2b-4a95-9f04-f064921221e2` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestAddCollaboratorsUnauthorizedIfCurrentUserIsNotCollaborator (0.02s)
	collaborators_blackbox_test.go:483: Checking collaborators: 
	collaborators_blackbox_test.go:484:   expecting: 
	collaborators_blackbox_test.go:486:   - 88d84e05-b343-4569-ae6a-35c4ed6ebec7
	collaborators_blackbox_test.go:488:   got: 
	collaborators_blackbox_test.go:492:   - 88d84e05-b343-4569-ae6a-35c4ed6ebec7
=== RUN   TestAddCollaboratorsUnauthorizedIfNoToken
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=732067f6-319f-4b47-a535-9116826be5ed pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=732067f6-319f-4b47-a535-9116826be5ed pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=f8d1db99-b322-4e45-8561-d097f0e34324 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=f8d1db99-b322-4e45-8561-d097f0e34324 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=3bfcd313-3a92-4f49-97b4-90ac06152e1e pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=3bfcd313-3a92-4f49-97b4-90ac06152e1e pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Space resource created successfully" identity_id=732067f6-319f-4b47-a535-9116826be5ed pkg=space req_id= space_resource_id=e34370dd-9ab4-4dc1-ad90-1fd954448083 
time="2017-08-18T10:14:58+07:00" level=error msg="Missing space authz service" file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/space/authz/authz.go" func="github.com/fabric8-services/fabric8-auth/space/authz.Authorize" line=191 pid=5708 pkg="space/authz" req_id= req_params=map[spaceID:[9adaf2fd-163b-4078-9e9d-e6740633d16e] identityID:[f8d1db99-b322-4e45-8561-d097f0e34324]] space_id=9adaf2fd-163b-4078-9e9d-e6740633d16e 
time="2017-08-18T10:14:58+07:00" level=info msg="an error occurred in our api" err="[YDEMMISO] 401 unauthorized: missing space authz service" error_message="[YDEMMISO] 401 unauthorized: missing space authz service" pkg=jsonapi req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'space_resources' table with key e34370dd-9ab4-4dc1-ad90-1fd954448083" hook_name="mighti:record-7020f99b-f015-4e9f-8901-9e8485273f23" key=e34370dd-9ab4-4dc1-ad90-1fd954448083 pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 3bfcd313-3a92-4f49-97b4-90ac06152e1e" hook_name="mighti:record-7020f99b-f015-4e9f-8901-9e8485273f23" key=3bfcd313-3a92-4f49-97b4-90ac06152e1e pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key f8d1db99-b322-4e45-8561-d097f0e34324" hook_name="mighti:record-7020f99b-f015-4e9f-8901-9e8485273f23" key=f8d1db99-b322-4e45-8561-d097f0e34324 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 732067f6-319f-4b47-a535-9116826be5ed" hook_name="mighti:record-7020f99b-f015-4e9f-8901-9e8485273f23" key=732067f6-319f-4b47-a535-9116826be5ed pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
[info] removing callback `mighti:record-7020f99b-f015-4e9f-8901-9e8485273f23` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestAddCollaboratorsUnauthorizedIfNoToken (0.02s)
=== RUN   TestAddCollaboratorsWithRandomSpaceIDNotFound
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=241a4e02-8eb8-4db0-a36f-87cd37629871 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=241a4e02-8eb8-4db0-a36f-87cd37629871 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=bd47d59d-1eb8-431b-9db1-10131ff52e9b pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=bd47d59d-1eb8-431b-9db1-10131ff52e9b pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=c912dcff-11a0-4253-9a40-b3d2d8d583e5 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=c912dcff-11a0-4253-9a40-b3d2d8d583e5 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Space resource created successfully" identity_id=241a4e02-8eb8-4db0-a36f-87cd37629871 pkg=space req_id= space_resource_id=0d6456a0-58a3-45b6-b53a-7367b9e7d9c5 
time="2017-08-18T10:14:58+07:00" level=error msg="Could not find space resource by space ID" file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/space/space_resource.go" func="github.com/fabric8-services/fabric8-auth/space.(*GormResourceRepository).LoadBySpace" identity_id=241a4e02-8eb8-4db0-a36f-87cd37629871 line=190 pid=5708 pkg=space req_id= req_params=map[spaceID:[ca9ac7f8-306b-4dad-a88b-c995223b88e4] identityID:[6b094f47-a691-412d-8772-42a24f45aa7f]] space_id=ca9ac7f8-306b-4dad-a88b-c995223b88e4 
time="2017-08-18T10:14:58+07:00" level=error msg="database transaction failed!" err="space resource with id 'ca9ac7f8-306b-4dad-a88b-c995223b88e4' not found" file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/application/transaction.go" func="github.com/fabric8-services/fabric8-auth/application.Transactional.func1" line=50 pid=5708 pkg=application.Transactional 
time="2017-08-18T10:14:58+07:00" level=info msg="an error occurred in our api" err="[lmflUcDO] 404 not_found: space resource with id 'ca9ac7f8-306b-4dad-a88b-c995223b88e4' not found" error_message="[lmflUcDO] 404 not_found: space resource with id 'ca9ac7f8-306b-4dad-a88b-c995223b88e4' not found" identity_id=241a4e02-8eb8-4db0-a36f-87cd37629871 pkg=jsonapi req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'space_resources' table with key 0d6456a0-58a3-45b6-b53a-7367b9e7d9c5" hook_name="mighti:record-a20faef5-c274-4cf2-8860-a526b47e2b47" key=0d6456a0-58a3-45b6-b53a-7367b9e7d9c5 pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key c912dcff-11a0-4253-9a40-b3d2d8d583e5" hook_name="mighti:record-a20faef5-c274-4cf2-8860-a526b47e2b47" key=c912dcff-11a0-4253-9a40-b3d2d8d583e5 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key bd47d59d-1eb8-431b-9db1-10131ff52e9b" hook_name="mighti:record-a20faef5-c274-4cf2-8860-a526b47e2b47" key=bd47d59d-1eb8-431b-9db1-10131ff52e9b pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 241a4e02-8eb8-4db0-a36f-87cd37629871" hook_name="mighti:record-a20faef5-c274-4cf2-8860-a526b47e2b47" key=241a4e02-8eb8-4db0-a36f-87cd37629871 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
[info] removing callback `mighti:record-a20faef5-c274-4cf2-8860-a526b47e2b47` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestAddCollaboratorsWithRandomSpaceIDNotFound (0.02s)
=== RUN   TestAddCollaboratorsWithWrongUserIDFormatReturnsBadRequest
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=261b63da-b604-4d2d-948a-26b138c76eb4 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=261b63da-b604-4d2d-948a-26b138c76eb4 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=98538901-09e1-428e-930d-b8f9265803a9 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=98538901-09e1-428e-930d-b8f9265803a9 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=45031527-8dff-4bbf-b4bd-afd4d3f8d3e5 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=45031527-8dff-4bbf-b4bd-afd4d3f8d3e5 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Space resource created successfully" identity_id=261b63da-b604-4d2d-948a-26b138c76eb4 pkg=space req_id= space_resource_id=867e3038-3f9b-4275-a09a-1c0cf16aadc7 
time="2017-08-18T10:14:58+07:00" level=error msg="unable to convert the identity ID to uuid v4" file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/controller/collaborators.go" func="github.com/fabric8-services/fabric8-auth/controller.(*CollaboratorsController).updatePolicy" identity_id=wrongFormatID line=182 pid=5708 pkg=controller req_id= req_params=map[identityID:[wrongFormatID] spaceID:[eac46f1e-b942-427e-b397-b1a794f6ea72]] 
time="2017-08-18T10:14:58+07:00" level=info msg="an error occurred in our api" err="[1+tVwOkS] 400 bad_request: uuid: UUID string too short: wrongFormatID" error_message="[1+tVwOkS] 400 bad_request: uuid: UUID string too short: wrongFormatID" identity_id=261b63da-b604-4d2d-948a-26b138c76eb4 pkg=jsonapi req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'space_resources' table with key 867e3038-3f9b-4275-a09a-1c0cf16aadc7" hook_name="mighti:record-4400364f-dbc7-4f06-80d4-7cbf68ac5605" key=867e3038-3f9b-4275-a09a-1c0cf16aadc7 pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 45031527-8dff-4bbf-b4bd-afd4d3f8d3e5" hook_name="mighti:record-4400364f-dbc7-4f06-80d4-7cbf68ac5605" key=45031527-8dff-4bbf-b4bd-afd4d3f8d3e5 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 98538901-09e1-428e-930d-b8f9265803a9" hook_name="mighti:record-4400364f-dbc7-4f06-80d4-7cbf68ac5605" key=98538901-09e1-428e-930d-b8f9265803a9 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 261b63da-b604-4d2d-948a-26b138c76eb4" hook_name="mighti:record-4400364f-dbc7-4f06-80d4-7cbf68ac5605" key=261b63da-b604-4d2d-948a-26b138c76eb4 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
[info] removing callback `mighti:record-4400364f-dbc7-4f06-80d4-7cbf68ac5605` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestAddCollaboratorsWithWrongUserIDFormatReturnsBadRequest (0.02s)
=== RUN   TestAddManyCollaboratorsOk
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=74b2afb8-8acb-4e19-abd9-c43ce040af50 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=74b2afb8-8acb-4e19-abd9-c43ce040af50 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=497f2fc8-0b56-4547-95d7-ee9b97d8cb2d pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=497f2fc8-0b56-4547-95d7-ee9b97d8cb2d pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=6b10aae4-c11d-4997-b8ba-c256701372c2 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=6b10aae4-c11d-4997-b8ba-c256701372c2 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Space resource created successfully" identity_id=74b2afb8-8acb-4e19-abd9-c43ce040af50 pkg=space req_id= space_resource_id=8027ff82-8218-45ee-a1de-f2e5d2c51d8f 
time="2017-08-18T10:14:58+07:00" level=info msg="Space resource updated successfully" identity_id=74b2afb8-8acb-4e19-abd9-c43ce040af50 pkg=space req_id= space_resource_id=8027ff82-8218-45ee-a1de-f2e5d2c51d8f 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'space_resources' table with key 8027ff82-8218-45ee-a1de-f2e5d2c51d8f" hook_name="mighti:record-4120d0a1-2b96-4d04-8c3e-50395d2e532c" key=8027ff82-8218-45ee-a1de-f2e5d2c51d8f pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 6b10aae4-c11d-4997-b8ba-c256701372c2" hook_name="mighti:record-4120d0a1-2b96-4d04-8c3e-50395d2e532c" key=6b10aae4-c11d-4997-b8ba-c256701372c2 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 497f2fc8-0b56-4547-95d7-ee9b97d8cb2d" hook_name="mighti:record-4120d0a1-2b96-4d04-8c3e-50395d2e532c" key=497f2fc8-0b56-4547-95d7-ee9b97d8cb2d pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 74b2afb8-8acb-4e19-abd9-c43ce040af50" hook_name="mighti:record-4120d0a1-2b96-4d04-8c3e-50395d2e532c" key=74b2afb8-8acb-4e19-abd9-c43ce040af50 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
[info] removing callback `mighti:record-4120d0a1-2b96-4d04-8c3e-50395d2e532c` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestAddManyCollaboratorsOk (0.03s)
	collaborators_blackbox_test.go:483: Checking collaborators: 
	collaborators_blackbox_test.go:484:   expecting: 
	collaborators_blackbox_test.go:486:   - 74b2afb8-8acb-4e19-abd9-c43ce040af50
	collaborators_blackbox_test.go:488:   got: 
	collaborators_blackbox_test.go:492:   - 74b2afb8-8acb-4e19-abd9-c43ce040af50
	collaborators_blackbox_test.go:483: Checking collaborators: 
	collaborators_blackbox_test.go:484:   expecting: 
	collaborators_blackbox_test.go:486:   - 74b2afb8-8acb-4e19-abd9-c43ce040af50
	collaborators_blackbox_test.go:486:   - 497f2fc8-0b56-4547-95d7-ee9b97d8cb2d
	collaborators_blackbox_test.go:486:   - 6b10aae4-c11d-4997-b8ba-c256701372c2
	collaborators_blackbox_test.go:488:   got: 
	collaborators_blackbox_test.go:492:   - 74b2afb8-8acb-4e19-abd9-c43ce040af50
	collaborators_blackbox_test.go:492:   - 497f2fc8-0b56-4547-95d7-ee9b97d8cb2d
	collaborators_blackbox_test.go:492:   - 6b10aae4-c11d-4997-b8ba-c256701372c2
=== RUN   TestAddManyCollaboratorsUnauthorizedIfCurrentUserIsNotCollaborator
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=6f7fc500-eb0d-464d-a279-5d8fc5db74c7 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=6f7fc500-eb0d-464d-a279-5d8fc5db74c7 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=8547993b-f942-44bf-a3c6-20c9635f8283 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=8547993b-f942-44bf-a3c6-20c9635f8283 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=eed32294-ed65-4370-90b5-25a48f40e4f9 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=eed32294-ed65-4370-90b5-25a48f40e4f9 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Space resource created successfully" identity_id=6f7fc500-eb0d-464d-a279-5d8fc5db74c7 pkg=space req_id= space_resource_id=c10575f7-7af1-45c5-951c-a82f10b26c47 
time="2017-08-18T10:14:58+07:00" level=info msg="an error occurred in our api" err="[Is6AFd+N] 401 unauthorized: User not among space collaborators" error_message="[Is6AFd+N] 401 unauthorized: User not among space collaborators" identity_id=6f7fc500-eb0d-464d-a279-5d8fc5db74c7 pkg=jsonapi req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'space_resources' table with key c10575f7-7af1-45c5-951c-a82f10b26c47" hook_name="mighti:record-af0abc6e-ce26-4f8e-a0ed-735496ee840a" key=c10575f7-7af1-45c5-951c-a82f10b26c47 pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key eed32294-ed65-4370-90b5-25a48f40e4f9" hook_name="mighti:record-af0abc6e-ce26-4f8e-a0ed-735496ee840a" key=eed32294-ed65-4370-90b5-25a48f40e4f9 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 8547993b-f942-44bf-a3c6-20c9635f8283" hook_name="mighti:record-af0abc6e-ce26-4f8e-a0ed-735496ee840a" key=8547993b-f942-44bf-a3c6-20c9635f8283 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 6f7fc500-eb0d-464d-a279-5d8fc5db74c7" hook_name="mighti:record-af0abc6e-ce26-4f8e-a0ed-735496ee840a" key=6f7fc500-eb0d-464d-a279-5d8fc5db74c7 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
[info] removing callback `mighti:record-af0abc6e-ce26-4f8e-a0ed-735496ee840a` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestAddManyCollaboratorsUnauthorizedIfCurrentUserIsNotCollaborator (0.02s)
	collaborators_blackbox_test.go:483: Checking collaborators: 
	collaborators_blackbox_test.go:484:   expecting: 
	collaborators_blackbox_test.go:486:   - 8547993b-f942-44bf-a3c6-20c9635f8283
	collaborators_blackbox_test.go:488:   got: 
	collaborators_blackbox_test.go:492:   - 8547993b-f942-44bf-a3c6-20c9635f8283
=== RUN   TestAddManyCollaboratorsUnauthorizedIfNoToken
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=468807f3-abb3-4717-a428-3bfec28c172d pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=468807f3-abb3-4717-a428-3bfec28c172d pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=6ccea1b7-300b-4c21-9eb0-ab4c4a160646 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=6ccea1b7-300b-4c21-9eb0-ab4c4a160646 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=6320ecdd-b28a-4a04-bc97-c918d2a4f298 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=6320ecdd-b28a-4a04-bc97-c918d2a4f298 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Space resource created successfully" identity_id=468807f3-abb3-4717-a428-3bfec28c172d pkg=space req_id= space_resource_id=19d361e7-a7ba-4f4d-bd04-af01cce16b3a 
time="2017-08-18T10:14:58+07:00" level=error msg="Missing space authz service" file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/space/authz/authz.go" func="github.com/fabric8-services/fabric8-auth/space/authz.Authorize" line=191 pid=5708 pkg="space/authz" req_id= req_params=map[spaceID:[3ad9ac2e-7931-40f6-a31e-166852a5c724]] space_id=3ad9ac2e-7931-40f6-a31e-166852a5c724 
time="2017-08-18T10:14:58+07:00" level=info msg="an error occurred in our api" err="[qEDQx24k] 401 unauthorized: missing space authz service" error_message="[qEDQx24k] 401 unauthorized: missing space authz service" pkg=jsonapi req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'space_resources' table with key 19d361e7-a7ba-4f4d-bd04-af01cce16b3a" hook_name="mighti:record-221b53b4-485d-4896-940c-28135a475c72" key=19d361e7-a7ba-4f4d-bd04-af01cce16b3a pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 6320ecdd-b28a-4a04-bc97-c918d2a4f298" hook_name="mighti:record-221b53b4-485d-4896-940c-28135a475c72" key=6320ecdd-b28a-4a04-bc97-c918d2a4f298 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 6ccea1b7-300b-4c21-9eb0-ab4c4a160646" hook_name="mighti:record-221b53b4-485d-4896-940c-28135a475c72" key=6ccea1b7-300b-4c21-9eb0-ab4c4a160646 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 468807f3-abb3-4717-a428-3bfec28c172d" hook_name="mighti:record-221b53b4-485d-4896-940c-28135a475c72" key=468807f3-abb3-4717-a428-3bfec28c172d pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
[info] removing callback `mighti:record-221b53b4-485d-4896-940c-28135a475c72` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestAddManyCollaboratorsUnauthorizedIfNoToken (0.02s)
=== RUN   TestAddManyCollaboratorsWithRandomSpaceIDNotFound
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=ab22af06-21dd-4bb0-b2b5-8b0f261a7f22 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=ab22af06-21dd-4bb0-b2b5-8b0f261a7f22 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=d28d802e-a771-488d-871e-2b1e81c39944 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=d28d802e-a771-488d-871e-2b1e81c39944 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=468fc1c3-fa6d-4fc5-aa5d-3d7fa258ff32 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=468fc1c3-fa6d-4fc5-aa5d-3d7fa258ff32 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Space resource created successfully" identity_id=ab22af06-21dd-4bb0-b2b5-8b0f261a7f22 pkg=space req_id= space_resource_id=3c46bd1c-9d53-4853-a7b9-f5011787c3b8 
time="2017-08-18T10:14:58+07:00" level=error msg="Could not find space resource by space ID" file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/space/space_resource.go" func="github.com/fabric8-services/fabric8-auth/space.(*GormResourceRepository).LoadBySpace" identity_id=ab22af06-21dd-4bb0-b2b5-8b0f261a7f22 line=190 pid=5708 pkg=space req_id= req_params=map[spaceID:[6353fe6c-52bf-461a-8002-0cd0f2d612ac]] space_id=6353fe6c-52bf-461a-8002-0cd0f2d612ac 
time="2017-08-18T10:14:58+07:00" level=error msg="database transaction failed!" err="space resource with id '6353fe6c-52bf-461a-8002-0cd0f2d612ac' not found" file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/application/transaction.go" func="github.com/fabric8-services/fabric8-auth/application.Transactional.func1" line=50 pid=5708 pkg=application.Transactional 
time="2017-08-18T10:14:58+07:00" level=info msg="an error occurred in our api" err="[qVIOO4dr] 404 not_found: space resource with id '6353fe6c-52bf-461a-8002-0cd0f2d612ac' not found" error_message="[qVIOO4dr] 404 not_found: space resource with id '6353fe6c-52bf-461a-8002-0cd0f2d612ac' not found" identity_id=ab22af06-21dd-4bb0-b2b5-8b0f261a7f22 pkg=jsonapi req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'space_resources' table with key 3c46bd1c-9d53-4853-a7b9-f5011787c3b8" hook_name="mighti:record-6a3df378-090d-4bd9-bd33-4dd35d859987" key=3c46bd1c-9d53-4853-a7b9-f5011787c3b8 pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 468fc1c3-fa6d-4fc5-aa5d-3d7fa258ff32" hook_name="mighti:record-6a3df378-090d-4bd9-bd33-4dd35d859987" key=468fc1c3-fa6d-4fc5-aa5d-3d7fa258ff32 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key d28d802e-a771-488d-871e-2b1e81c39944" hook_name="mighti:record-6a3df378-090d-4bd9-bd33-4dd35d859987" key=d28d802e-a771-488d-871e-2b1e81c39944 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key ab22af06-21dd-4bb0-b2b5-8b0f261a7f22" hook_name="mighti:record-6a3df378-090d-4bd9-bd33-4dd35d859987" key=ab22af06-21dd-4bb0-b2b5-8b0f261a7f22 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
[info] removing callback `mighti:record-6a3df378-090d-4bd9-bd33-4dd35d859987` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestAddManyCollaboratorsWithRandomSpaceIDNotFound (0.02s)
=== RUN   TestAddManyCollaboratorsWithWrongUserIDFormatReturnsBadRequest
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=47226467-8cfd-4238-87c9-d4675dff3486 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=47226467-8cfd-4238-87c9-d4675dff3486 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=e422499d-cab2-49c8-ad4a-fcb19de8dfe0 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=e422499d-cab2-49c8-ad4a-fcb19de8dfe0 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=7f48481d-985f-4c94-b628-f44eeb74fe54 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=7f48481d-985f-4c94-b628-f44eeb74fe54 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Space resource created successfully" identity_id=47226467-8cfd-4238-87c9-d4675dff3486 pkg=space req_id= space_resource_id=be653af8-360f-4cd5-b154-514cced3bb3c 
time="2017-08-18T10:14:58+07:00" level=error msg="unable to convert the identity ID to uuid v4" file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/controller/collaborators.go" func="github.com/fabric8-services/fabric8-auth/controller.(*CollaboratorsController).updatePolicy" identity_id=wrongFormatID line=182 pid=5708 pkg=controller req_id= req_params=map[spaceID:[08b77534-ff77-40f0-8b9d-0e9942ae8e67]] 
time="2017-08-18T10:14:58+07:00" level=info msg="an error occurred in our api" err="[X8Lc83N+] 400 bad_request: uuid: UUID string too short: wrongFormatID" error_message="[X8Lc83N+] 400 bad_request: uuid: UUID string too short: wrongFormatID" identity_id=47226467-8cfd-4238-87c9-d4675dff3486 pkg=jsonapi req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'space_resources' table with key be653af8-360f-4cd5-b154-514cced3bb3c" hook_name="mighti:record-2a47a763-dfcd-47c9-bb41-fd6e5ffae1c3" key=be653af8-360f-4cd5-b154-514cced3bb3c pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 7f48481d-985f-4c94-b628-f44eeb74fe54" hook_name="mighti:record-2a47a763-dfcd-47c9-bb41-fd6e5ffae1c3" key=7f48481d-985f-4c94-b628-f44eeb74fe54 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key e422499d-cab2-49c8-ad4a-fcb19de8dfe0" hook_name="mighti:record-2a47a763-dfcd-47c9-bb41-fd6e5ffae1c3" key=e422499d-cab2-49c8-ad4a-fcb19de8dfe0 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 47226467-8cfd-4238-87c9-d4675dff3486" hook_name="mighti:record-2a47a763-dfcd-47c9-bb41-fd6e5ffae1c3" key=47226467-8cfd-4238-87c9-d4675dff3486 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
[info] removing callback `mighti:record-2a47a763-dfcd-47c9-bb41-fd6e5ffae1c3` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestAddManyCollaboratorsWithWrongUserIDFormatReturnsBadRequest (0.02s)
=== RUN   TestListCollaboratorsByPagesOK
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=11e1ec76-f165-43a9-a23f-a9cb918b9fc1 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=11e1ec76-f165-43a9-a23f-a9cb918b9fc1 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=3ced4b94-686e-462a-8d36-32fa07ca5fff pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=3ced4b94-686e-462a-8d36-32fa07ca5fff pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=8cf31b44-9305-4e1b-af72-da4d1555cdf6 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=8cf31b44-9305-4e1b-af72-da4d1555cdf6 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Space resource created successfully" identity_id=11e1ec76-f165-43a9-a23f-a9cb918b9fc1 pkg=space req_id= space_resource_id=94477583-f7c3-4190-b11a-d67b51e7cbbc 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'space_resources' table with key 94477583-f7c3-4190-b11a-d67b51e7cbbc" hook_name="mighti:record-f98ae43d-5518-4a97-b628-8d898fd2ac07" key=94477583-f7c3-4190-b11a-d67b51e7cbbc pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 8cf31b44-9305-4e1b-af72-da4d1555cdf6" hook_name="mighti:record-f98ae43d-5518-4a97-b628-8d898fd2ac07" key=8cf31b44-9305-4e1b-af72-da4d1555cdf6 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 3ced4b94-686e-462a-8d36-32fa07ca5fff" hook_name="mighti:record-f98ae43d-5518-4a97-b628-8d898fd2ac07" key=3ced4b94-686e-462a-8d36-32fa07ca5fff pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 11e1ec76-f165-43a9-a23f-a9cb918b9fc1" hook_name="mighti:record-f98ae43d-5518-4a97-b628-8d898fd2ac07" key=11e1ec76-f165-43a9-a23f-a9cb918b9fc1 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
[info] removing callback `mighti:record-f98ae43d-5518-4a97-b628-8d898fd2ac07` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestListCollaboratorsByPagesOK (0.03s)
	collaborators_blackbox_test.go:483: Checking collaborators: 
	collaborators_blackbox_test.go:484:   expecting: 
	collaborators_blackbox_test.go:486:   - 11e1ec76-f165-43a9-a23f-a9cb918b9fc1
	collaborators_blackbox_test.go:486:   - 3ced4b94-686e-462a-8d36-32fa07ca5fff
	collaborators_blackbox_test.go:486:   - 8cf31b44-9305-4e1b-af72-da4d1555cdf6
	collaborators_blackbox_test.go:488:   got: 
	collaborators_blackbox_test.go:492:   - 11e1ec76-f165-43a9-a23f-a9cb918b9fc1
	collaborators_blackbox_test.go:492:   - 3ced4b94-686e-462a-8d36-32fa07ca5fff
	collaborators_blackbox_test.go:492:   - 8cf31b44-9305-4e1b-af72-da4d1555cdf6
	collaborators_blackbox_test.go:483: Checking collaborators: 
	collaborators_blackbox_test.go:484:   expecting: 
	collaborators_blackbox_test.go:486:   - 11e1ec76-f165-43a9-a23f-a9cb918b9fc1
	collaborators_blackbox_test.go:486:   - 3ced4b94-686e-462a-8d36-32fa07ca5fff
	collaborators_blackbox_test.go:486:   - 8cf31b44-9305-4e1b-af72-da4d1555cdf6
	collaborators_blackbox_test.go:488:   got: 
	collaborators_blackbox_test.go:492:   - 11e1ec76-f165-43a9-a23f-a9cb918b9fc1
	collaborators_blackbox_test.go:492:   - 3ced4b94-686e-462a-8d36-32fa07ca5fff
	collaborators_blackbox_test.go:492:   - 8cf31b44-9305-4e1b-af72-da4d1555cdf6
	collaborators_blackbox_test.go:483: Checking collaborators: 
	collaborators_blackbox_test.go:484:   expecting: 
	collaborators_blackbox_test.go:486:   - 3ced4b94-686e-462a-8d36-32fa07ca5fff
	collaborators_blackbox_test.go:488:   got: 
	collaborators_blackbox_test.go:492:   - 3ced4b94-686e-462a-8d36-32fa07ca5fff
	collaborators_blackbox_test.go:483: Checking collaborators: 
	collaborators_blackbox_test.go:484:   expecting: 
	collaborators_blackbox_test.go:486:   - 3ced4b94-686e-462a-8d36-32fa07ca5fff
	collaborators_blackbox_test.go:486:   - 8cf31b44-9305-4e1b-af72-da4d1555cdf6
	collaborators_blackbox_test.go:488:   got: 
	collaborators_blackbox_test.go:492:   - 3ced4b94-686e-462a-8d36-32fa07ca5fff
	collaborators_blackbox_test.go:492:   - 8cf31b44-9305-4e1b-af72-da4d1555cdf6
	collaborators_blackbox_test.go:483: Checking collaborators: 
	collaborators_blackbox_test.go:484:   expecting: 
	collaborators_blackbox_test.go:486:   - 8cf31b44-9305-4e1b-af72-da4d1555cdf6
	collaborators_blackbox_test.go:488:   got: 
	collaborators_blackbox_test.go:492:   - 8cf31b44-9305-4e1b-af72-da4d1555cdf6
	collaborators_blackbox_test.go:483: Checking collaborators: 
	collaborators_blackbox_test.go:484:   expecting: 
	collaborators_blackbox_test.go:488:   got: 
=== RUN   TestListCollaboratorsNotModifiedUsingIfModifiedSinceHeader
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=0a9c02cd-0dea-4065-b78c-da17d9b724d7 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=0a9c02cd-0dea-4065-b78c-da17d9b724d7 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=efb937a5-54c5-4cce-a2bf-7e35b277424f pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=efb937a5-54c5-4cce-a2bf-7e35b277424f pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=e9abf729-c2f4-4a29-8d1d-9740012daa9e pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=e9abf729-c2f4-4a29-8d1d-9740012daa9e pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Space resource created successfully" identity_id=0a9c02cd-0dea-4065-b78c-da17d9b724d7 pkg=space req_id= space_resource_id=c9ca3570-3a2a-42c1-8066-ece09abd57e3 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'space_resources' table with key c9ca3570-3a2a-42c1-8066-ece09abd57e3" hook_name="mighti:record-75ebea15-e83d-49c2-a3aa-148e4829de23" key=c9ca3570-3a2a-42c1-8066-ece09abd57e3 pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key e9abf729-c2f4-4a29-8d1d-9740012daa9e" hook_name="mighti:record-75ebea15-e83d-49c2-a3aa-148e4829de23" key=e9abf729-c2f4-4a29-8d1d-9740012daa9e pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key efb937a5-54c5-4cce-a2bf-7e35b277424f" hook_name="mighti:record-75ebea15-e83d-49c2-a3aa-148e4829de23" key=efb937a5-54c5-4cce-a2bf-7e35b277424f pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 0a9c02cd-0dea-4065-b78c-da17d9b724d7" hook_name="mighti:record-75ebea15-e83d-49c2-a3aa-148e4829de23" key=0a9c02cd-0dea-4065-b78c-da17d9b724d7 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
[info] removing callback `mighti:record-75ebea15-e83d-49c2-a3aa-148e4829de23` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestListCollaboratorsNotModifiedUsingIfModifiedSinceHeader (0.03s)
=== RUN   TestListCollaboratorsNotModifiedUsingIfNoneMatchHeader
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=6d49a28b-7966-4f8a-8669-98c0eea5f288 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=6d49a28b-7966-4f8a-8669-98c0eea5f288 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=8bfb16fb-f96a-4334-8f1f-4d233105dd65 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=8bfb16fb-f96a-4334-8f1f-4d233105dd65 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=8fd89bf1-30ed-4f42-9632-d8d41bfab75b pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=8fd89bf1-30ed-4f42-9632-d8d41bfab75b pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Space resource created successfully" identity_id=6d49a28b-7966-4f8a-8669-98c0eea5f288 pkg=space req_id= space_resource_id=974c50b7-869a-4ec5-bf3c-068c65df45bc 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'space_resources' table with key 974c50b7-869a-4ec5-bf3c-068c65df45bc" hook_name="mighti:record-c1e34c17-1b21-43da-8766-f2610a32bb54" key=974c50b7-869a-4ec5-bf3c-068c65df45bc pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 8fd89bf1-30ed-4f42-9632-d8d41bfab75b" hook_name="mighti:record-c1e34c17-1b21-43da-8766-f2610a32bb54" key=8fd89bf1-30ed-4f42-9632-d8d41bfab75b pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 8bfb16fb-f96a-4334-8f1f-4d233105dd65" hook_name="mighti:record-c1e34c17-1b21-43da-8766-f2610a32bb54" key=8bfb16fb-f96a-4334-8f1f-4d233105dd65 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 6d49a28b-7966-4f8a-8669-98c0eea5f288" hook_name="mighti:record-c1e34c17-1b21-43da-8766-f2610a32bb54" key=6d49a28b-7966-4f8a-8669-98c0eea5f288 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
[info] removing callback `mighti:record-c1e34c17-1b21-43da-8766-f2610a32bb54` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestListCollaboratorsNotModifiedUsingIfNoneMatchHeader (0.03s)
=== RUN   TestListCollaboratorsOK
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=05d1a1db-eaed-48b0-b27f-c4065427160a pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=05d1a1db-eaed-48b0-b27f-c4065427160a pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=6413b29f-158c-474a-8ff8-4899ada716fe pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=6413b29f-158c-474a-8ff8-4899ada716fe pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=f17d33ce-c548-4554-a683-9c1061bd28d4 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=f17d33ce-c548-4554-a683-9c1061bd28d4 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Space resource created successfully" identity_id=05d1a1db-eaed-48b0-b27f-c4065427160a pkg=space req_id= space_resource_id=9fee5b22-a261-4662-8dc9-c9755714d62d 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'space_resources' table with key 9fee5b22-a261-4662-8dc9-c9755714d62d" hook_name="mighti:record-db48bd66-e2c2-4f64-9497-47c9849bad64" key=9fee5b22-a261-4662-8dc9-c9755714d62d pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key f17d33ce-c548-4554-a683-9c1061bd28d4" hook_name="mighti:record-db48bd66-e2c2-4f64-9497-47c9849bad64" key=f17d33ce-c548-4554-a683-9c1061bd28d4 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 6413b29f-158c-474a-8ff8-4899ada716fe" hook_name="mighti:record-db48bd66-e2c2-4f64-9497-47c9849bad64" key=6413b29f-158c-474a-8ff8-4899ada716fe pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 05d1a1db-eaed-48b0-b27f-c4065427160a" hook_name="mighti:record-db48bd66-e2c2-4f64-9497-47c9849bad64" key=05d1a1db-eaed-48b0-b27f-c4065427160a pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
[info] removing callback `mighti:record-db48bd66-e2c2-4f64-9497-47c9849bad64` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestListCollaboratorsOK (0.03s)
	collaborators_blackbox_test.go:483: Checking collaborators: 
	collaborators_blackbox_test.go:484:   expecting: 
	collaborators_blackbox_test.go:486:   - 05d1a1db-eaed-48b0-b27f-c4065427160a
	collaborators_blackbox_test.go:486:   - 6413b29f-158c-474a-8ff8-4899ada716fe
	collaborators_blackbox_test.go:488:   got: 
	collaborators_blackbox_test.go:492:   - 05d1a1db-eaed-48b0-b27f-c4065427160a
	collaborators_blackbox_test.go:492:   - 6413b29f-158c-474a-8ff8-4899ada716fe
	collaborators_blackbox_test.go:483: Checking collaborators: 
	collaborators_blackbox_test.go:484:   expecting: 
	collaborators_blackbox_test.go:486:   - 05d1a1db-eaed-48b0-b27f-c4065427160a
	collaborators_blackbox_test.go:488:   got: 
	collaborators_blackbox_test.go:492:   - 05d1a1db-eaed-48b0-b27f-c4065427160a
=== RUN   TestListCollaboratorsOKUsingExpiredIfModifiedSinceHeader
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=c7d886e8-a36e-4126-99cd-7ca5b77bc32b pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=c7d886e8-a36e-4126-99cd-7ca5b77bc32b pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=2fe086cb-f9a0-4f6b-8591-ecf44480ad0c pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=2fe086cb-f9a0-4f6b-8591-ecf44480ad0c pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=8321acd4-b01b-4aaf-98f5-4881c95b99c2 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=8321acd4-b01b-4aaf-98f5-4881c95b99c2 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Space resource created successfully" identity_id=c7d886e8-a36e-4126-99cd-7ca5b77bc32b pkg=space req_id= space_resource_id=459e1ba2-1eed-47ba-b4ac-1cadc952d4c7 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'space_resources' table with key 459e1ba2-1eed-47ba-b4ac-1cadc952d4c7" hook_name="mighti:record-337e00ce-8068-416d-985f-8181d94b537a" key=459e1ba2-1eed-47ba-b4ac-1cadc952d4c7 pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 8321acd4-b01b-4aaf-98f5-4881c95b99c2" hook_name="mighti:record-337e00ce-8068-416d-985f-8181d94b537a" key=8321acd4-b01b-4aaf-98f5-4881c95b99c2 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 2fe086cb-f9a0-4f6b-8591-ecf44480ad0c" hook_name="mighti:record-337e00ce-8068-416d-985f-8181d94b537a" key=2fe086cb-f9a0-4f6b-8591-ecf44480ad0c pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key c7d886e8-a36e-4126-99cd-7ca5b77bc32b" hook_name="mighti:record-337e00ce-8068-416d-985f-8181d94b537a" key=c7d886e8-a36e-4126-99cd-7ca5b77bc32b pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
[info] removing callback `mighti:record-337e00ce-8068-416d-985f-8181d94b537a` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestListCollaboratorsOKUsingExpiredIfModifiedSinceHeader (0.02s)
	collaborators_blackbox_test.go:483: Checking collaborators: 
	collaborators_blackbox_test.go:484:   expecting: 
	collaborators_blackbox_test.go:486:   - c7d886e8-a36e-4126-99cd-7ca5b77bc32b
	collaborators_blackbox_test.go:486:   - 2fe086cb-f9a0-4f6b-8591-ecf44480ad0c
	collaborators_blackbox_test.go:488:   got: 
	collaborators_blackbox_test.go:492:   - c7d886e8-a36e-4126-99cd-7ca5b77bc32b
	collaborators_blackbox_test.go:492:   - 2fe086cb-f9a0-4f6b-8591-ecf44480ad0c
=== RUN   TestListCollaboratorsOKUsingExpiredIfNoneMatchHeader
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=b4214e5d-1552-45c2-9f3e-471d282ee7b7 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=b4214e5d-1552-45c2-9f3e-471d282ee7b7 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=0a9c98aa-6229-48f4-8542-a7d3aaf6b4e8 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=0a9c98aa-6229-48f4-8542-a7d3aaf6b4e8 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=4dbea045-bb70-4bf1-b32d-760ab256b0dd pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=4dbea045-bb70-4bf1-b32d-760ab256b0dd pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Space resource created successfully" identity_id=b4214e5d-1552-45c2-9f3e-471d282ee7b7 pkg=space req_id= space_resource_id=0c7da971-55cd-4db3-a2a6-7339b0aa92ef 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'space_resources' table with key 0c7da971-55cd-4db3-a2a6-7339b0aa92ef" hook_name="mighti:record-9e2a6a26-02dc-4ae0-87d0-8de929259421" key=0c7da971-55cd-4db3-a2a6-7339b0aa92ef pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 4dbea045-bb70-4bf1-b32d-760ab256b0dd" hook_name="mighti:record-9e2a6a26-02dc-4ae0-87d0-8de929259421" key=4dbea045-bb70-4bf1-b32d-760ab256b0dd pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 0a9c98aa-6229-48f4-8542-a7d3aaf6b4e8" hook_name="mighti:record-9e2a6a26-02dc-4ae0-87d0-8de929259421" key=0a9c98aa-6229-48f4-8542-a7d3aaf6b4e8 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key b4214e5d-1552-45c2-9f3e-471d282ee7b7" hook_name="mighti:record-9e2a6a26-02dc-4ae0-87d0-8de929259421" key=b4214e5d-1552-45c2-9f3e-471d282ee7b7 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
[info] removing callback `mighti:record-9e2a6a26-02dc-4ae0-87d0-8de929259421` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestListCollaboratorsOKUsingExpiredIfNoneMatchHeader (0.02s)
	collaborators_blackbox_test.go:483: Checking collaborators: 
	collaborators_blackbox_test.go:484:   expecting: 
	collaborators_blackbox_test.go:486:   - b4214e5d-1552-45c2-9f3e-471d282ee7b7
	collaborators_blackbox_test.go:486:   - 0a9c98aa-6229-48f4-8542-a7d3aaf6b4e8
	collaborators_blackbox_test.go:488:   got: 
	collaborators_blackbox_test.go:492:   - b4214e5d-1552-45c2-9f3e-471d282ee7b7
	collaborators_blackbox_test.go:492:   - 0a9c98aa-6229-48f4-8542-a7d3aaf6b4e8
=== RUN   TestListCollaboratorsWithRandomSpaceIDNotFound
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=f1e53d62-cdf5-42a7-a140-087c86e11923 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=f1e53d62-cdf5-42a7-a140-087c86e11923 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=9f7bce72-8555-449b-aae4-a2218106b4aa pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=9f7bce72-8555-449b-aae4-a2218106b4aa pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=b630b5da-fa5a-4fd1-9ac9-f72c222c3ada pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=b630b5da-fa5a-4fd1-9ac9-f72c222c3ada pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Space resource created successfully" identity_id=f1e53d62-cdf5-42a7-a140-087c86e11923 pkg=space req_id= space_resource_id=d13ff632-b8d7-4b3a-acf3-74ce0d5b18ff 
time="2017-08-18T10:14:58+07:00" level=error msg="Could not find space resource by space ID" file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/space/space_resource.go" func="github.com/fabric8-services/fabric8-auth/space.(*GormResourceRepository).LoadBySpace" line=190 pid=5708 pkg=space req_id= req_params=map[spaceID:[8f20e4ff-9d94-434f-96a7-6efaba37d812]] space_id=8f20e4ff-9d94-434f-96a7-6efaba37d812 
time="2017-08-18T10:14:58+07:00" level=error msg="database transaction failed!" err="space resource with id '8f20e4ff-9d94-434f-96a7-6efaba37d812' not found" file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/application/transaction.go" func="github.com/fabric8-services/fabric8-auth/application.Transactional.func1" line=50 pid=5708 pkg=application.Transactional 
time="2017-08-18T10:14:58+07:00" level=info msg="an error occurred in our api" err="[+sdQA7R1] 404 not_found: space resource with id '8f20e4ff-9d94-434f-96a7-6efaba37d812' not found" error_message="[+sdQA7R1] 404 not_found: space resource with id '8f20e4ff-9d94-434f-96a7-6efaba37d812' not found" pkg=jsonapi req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'space_resources' table with key d13ff632-b8d7-4b3a-acf3-74ce0d5b18ff" hook_name="mighti:record-6ef82e08-6026-425e-b676-1023f2cfcd2e" key=d13ff632-b8d7-4b3a-acf3-74ce0d5b18ff pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key b630b5da-fa5a-4fd1-9ac9-f72c222c3ada" hook_name="mighti:record-6ef82e08-6026-425e-b676-1023f2cfcd2e" key=b630b5da-fa5a-4fd1-9ac9-f72c222c3ada pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 9f7bce72-8555-449b-aae4-a2218106b4aa" hook_name="mighti:record-6ef82e08-6026-425e-b676-1023f2cfcd2e" key=9f7bce72-8555-449b-aae4-a2218106b4aa pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key f1e53d62-cdf5-42a7-a140-087c86e11923" hook_name="mighti:record-6ef82e08-6026-425e-b676-1023f2cfcd2e" key=f1e53d62-cdf5-42a7-a140-087c86e11923 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
[info] removing callback `mighti:record-6ef82e08-6026-425e-b676-1023f2cfcd2e` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestListCollaboratorsWithRandomSpaceIDNotFound (0.02s)
=== RUN   TestRemoveCollaboratorsFailsIfTryToRemoveLastCollaborator
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=5a2e853b-7db2-486f-83dc-19e94853397e pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=5a2e853b-7db2-486f-83dc-19e94853397e pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=52eb74ac-6ce2-4ea4-ad76-c82996e65afd pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=52eb74ac-6ce2-4ea4-ad76-c82996e65afd pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=43dfd850-8576-4267-9a40-4968ea5c3154 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=43dfd850-8576-4267-9a40-4968ea5c3154 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Space resource created successfully" identity_id=5a2e853b-7db2-486f-83dc-19e94853397e pkg=space req_id= space_resource_id=a094dda4-f4f1-4ea9-a84a-658a04ba6a32 
time="2017-08-18T10:14:58+07:00" level=info msg="an error occurred in our api" err="[P1CydghA] 400 bad_request: space should have at least one collaborator" error_message="[P1CydghA] 400 bad_request: space should have at least one collaborator" identity_id=5a2e853b-7db2-486f-83dc-19e94853397e pkg=jsonapi req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'space_resources' table with key a094dda4-f4f1-4ea9-a84a-658a04ba6a32" hook_name="mighti:record-03c089ca-cdd0-4a81-9c45-8aebd2ef85f9" key=a094dda4-f4f1-4ea9-a84a-658a04ba6a32 pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 43dfd850-8576-4267-9a40-4968ea5c3154" hook_name="mighti:record-03c089ca-cdd0-4a81-9c45-8aebd2ef85f9" key=43dfd850-8576-4267-9a40-4968ea5c3154 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 52eb74ac-6ce2-4ea4-ad76-c82996e65afd" hook_name="mighti:record-03c089ca-cdd0-4a81-9c45-8aebd2ef85f9" key=52eb74ac-6ce2-4ea4-ad76-c82996e65afd pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 5a2e853b-7db2-486f-83dc-19e94853397e" hook_name="mighti:record-03c089ca-cdd0-4a81-9c45-8aebd2ef85f9" key=5a2e853b-7db2-486f-83dc-19e94853397e pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
[info] removing callback `mighti:record-03c089ca-cdd0-4a81-9c45-8aebd2ef85f9` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestRemoveCollaboratorsFailsIfTryToRemoveLastCollaborator (0.02s)
	collaborators_blackbox_test.go:483: Checking collaborators: 
	collaborators_blackbox_test.go:484:   expecting: 
	collaborators_blackbox_test.go:486:   - 5a2e853b-7db2-486f-83dc-19e94853397e
	collaborators_blackbox_test.go:488:   got: 
	collaborators_blackbox_test.go:492:   - 5a2e853b-7db2-486f-83dc-19e94853397e
=== RUN   TestRemoveCollaboratorsOk
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=e2c743ec-2d5a-4b98-b187-7d3dd4a16db8 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=e2c743ec-2d5a-4b98-b187-7d3dd4a16db8 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=add83b2c-f916-497c-b2f4-d00416d0cfe3 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=add83b2c-f916-497c-b2f4-d00416d0cfe3 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=4f16ef4a-5f86-4f53-9fe1-81dcb56d7f3a pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=4f16ef4a-5f86-4f53-9fe1-81dcb56d7f3a pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Space resource created successfully" identity_id=e2c743ec-2d5a-4b98-b187-7d3dd4a16db8 pkg=space req_id= space_resource_id=32d8e616-94c8-4806-92a9-1711ced74dca 
time="2017-08-18T10:14:58+07:00" level=info msg="Space resource updated successfully" identity_id=e2c743ec-2d5a-4b98-b187-7d3dd4a16db8 pkg=space req_id= space_resource_id=32d8e616-94c8-4806-92a9-1711ced74dca 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'space_resources' table with key 32d8e616-94c8-4806-92a9-1711ced74dca" hook_name="mighti:record-ace1c76a-a41f-4603-97f2-984b597507b3" key=32d8e616-94c8-4806-92a9-1711ced74dca pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 4f16ef4a-5f86-4f53-9fe1-81dcb56d7f3a" hook_name="mighti:record-ace1c76a-a41f-4603-97f2-984b597507b3" key=4f16ef4a-5f86-4f53-9fe1-81dcb56d7f3a pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key add83b2c-f916-497c-b2f4-d00416d0cfe3" hook_name="mighti:record-ace1c76a-a41f-4603-97f2-984b597507b3" key=add83b2c-f916-497c-b2f4-d00416d0cfe3 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key e2c743ec-2d5a-4b98-b187-7d3dd4a16db8" hook_name="mighti:record-ace1c76a-a41f-4603-97f2-984b597507b3" key=e2c743ec-2d5a-4b98-b187-7d3dd4a16db8 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
[info] removing callback `mighti:record-ace1c76a-a41f-4603-97f2-984b597507b3` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestRemoveCollaboratorsOk (0.03s)
	collaborators_blackbox_test.go:483: Checking collaborators: 
	collaborators_blackbox_test.go:484:   expecting: 
	collaborators_blackbox_test.go:486:   - e2c743ec-2d5a-4b98-b187-7d3dd4a16db8
	collaborators_blackbox_test.go:486:   - add83b2c-f916-497c-b2f4-d00416d0cfe3
	collaborators_blackbox_test.go:488:   got: 
	collaborators_blackbox_test.go:492:   - e2c743ec-2d5a-4b98-b187-7d3dd4a16db8
	collaborators_blackbox_test.go:492:   - add83b2c-f916-497c-b2f4-d00416d0cfe3
=== RUN   TestRemoveCollaboratorsUnauthorizedIfCurrentUserIsNotCollaborator
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=293d3688-29bd-4bb9-a52b-db751562b7a3 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=293d3688-29bd-4bb9-a52b-db751562b7a3 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=a89325d1-54ff-4ec5-ade2-0ec48873a4ea pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=a89325d1-54ff-4ec5-ade2-0ec48873a4ea pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=9cf3335f-18fd-4412-a273-307ade353f20 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=9cf3335f-18fd-4412-a273-307ade353f20 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Space resource created successfully" identity_id=293d3688-29bd-4bb9-a52b-db751562b7a3 pkg=space req_id= space_resource_id=99559443-b1b2-4f1f-a463-2fc33b6e36f4 
time="2017-08-18T10:14:58+07:00" level=info msg="an error occurred in our api" err="[c+t8cy8Z] 401 unauthorized: User not among space collaborators" error_message="[c+t8cy8Z] 401 unauthorized: User not among space collaborators" identity_id=a89325d1-54ff-4ec5-ade2-0ec48873a4ea pkg=jsonapi req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'space_resources' table with key 99559443-b1b2-4f1f-a463-2fc33b6e36f4" hook_name="mighti:record-f173e63e-9ee2-45ec-8f89-63554dd1b696" key=99559443-b1b2-4f1f-a463-2fc33b6e36f4 pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 9cf3335f-18fd-4412-a273-307ade353f20" hook_name="mighti:record-f173e63e-9ee2-45ec-8f89-63554dd1b696" key=9cf3335f-18fd-4412-a273-307ade353f20 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key a89325d1-54ff-4ec5-ade2-0ec48873a4ea" hook_name="mighti:record-f173e63e-9ee2-45ec-8f89-63554dd1b696" key=a89325d1-54ff-4ec5-ade2-0ec48873a4ea pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 293d3688-29bd-4bb9-a52b-db751562b7a3" hook_name="mighti:record-f173e63e-9ee2-45ec-8f89-63554dd1b696" key=293d3688-29bd-4bb9-a52b-db751562b7a3 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
[info] removing callback `mighti:record-f173e63e-9ee2-45ec-8f89-63554dd1b696` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestRemoveCollaboratorsUnauthorizedIfCurrentUserIsNotCollaborator (0.02s)
	collaborators_blackbox_test.go:483: Checking collaborators: 
	collaborators_blackbox_test.go:484:   expecting: 
	collaborators_blackbox_test.go:486:   - 293d3688-29bd-4bb9-a52b-db751562b7a3
	collaborators_blackbox_test.go:488:   got: 
	collaborators_blackbox_test.go:492:   - 293d3688-29bd-4bb9-a52b-db751562b7a3
=== RUN   TestRemoveCollaboratorsUnauthorizedIfNoToken
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=474efb75-3928-4039-9c50-8ce3e4e0c8f1 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=474efb75-3928-4039-9c50-8ce3e4e0c8f1 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=0359788e-2988-44a8-822d-842c5fc31190 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=0359788e-2988-44a8-822d-842c5fc31190 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=bad33348-35e2-4d77-b701-f8428f3bc8ec pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=bad33348-35e2-4d77-b701-f8428f3bc8ec pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Space resource created successfully" identity_id=474efb75-3928-4039-9c50-8ce3e4e0c8f1 pkg=space req_id= space_resource_id=d2d8652c-eba9-4047-b2f6-dc608fbeaefc 
time="2017-08-18T10:14:58+07:00" level=error msg="Missing space authz service" file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/space/authz/authz.go" func="github.com/fabric8-services/fabric8-auth/space/authz.Authorize" line=191 pid=5708 pkg="space/authz" req_id= req_params=map[spaceID:[b48c1a9b-85bd-4a72-88d5-cbf428b1deab] identityID:[0359788e-2988-44a8-822d-842c5fc31190]] space_id=b48c1a9b-85bd-4a72-88d5-cbf428b1deab 
time="2017-08-18T10:14:58+07:00" level=info msg="an error occurred in our api" err="[dvhm5aQ7] 401 unauthorized: missing space authz service" error_message="[dvhm5aQ7] 401 unauthorized: missing space authz service" pkg=jsonapi req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'space_resources' table with key d2d8652c-eba9-4047-b2f6-dc608fbeaefc" hook_name="mighti:record-bd7182f4-1571-45c0-80eb-172403f48059" key=d2d8652c-eba9-4047-b2f6-dc608fbeaefc pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key bad33348-35e2-4d77-b701-f8428f3bc8ec" hook_name="mighti:record-bd7182f4-1571-45c0-80eb-172403f48059" key=bad33348-35e2-4d77-b701-f8428f3bc8ec pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 0359788e-2988-44a8-822d-842c5fc31190" hook_name="mighti:record-bd7182f4-1571-45c0-80eb-172403f48059" key=0359788e-2988-44a8-822d-842c5fc31190 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 474efb75-3928-4039-9c50-8ce3e4e0c8f1" hook_name="mighti:record-bd7182f4-1571-45c0-80eb-172403f48059" key=474efb75-3928-4039-9c50-8ce3e4e0c8f1 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
[info] removing callback `mighti:record-bd7182f4-1571-45c0-80eb-172403f48059` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestRemoveCollaboratorsUnauthorizedIfNoToken (0.02s)
=== RUN   TestRemoveCollaboratorsWithRandomSpaceIDNotFound
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=e9e30c1f-c41c-4f33-8b9e-1a3fa074c478 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=e9e30c1f-c41c-4f33-8b9e-1a3fa074c478 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=adfeabc8-b763-468d-82e6-65b4e1b0ff1b pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=adfeabc8-b763-468d-82e6-65b4e1b0ff1b pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=f60225af-7202-4582-b3df-35efd7bfaf36 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=f60225af-7202-4582-b3df-35efd7bfaf36 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Space resource created successfully" identity_id=e9e30c1f-c41c-4f33-8b9e-1a3fa074c478 pkg=space req_id= space_resource_id=62634b54-b53f-4615-a3ee-9ee496b00e28 
time="2017-08-18T10:14:58+07:00" level=error msg="Could not find space resource by space ID" file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/space/space_resource.go" func="github.com/fabric8-services/fabric8-auth/space.(*GormResourceRepository).LoadBySpace" identity_id=e9e30c1f-c41c-4f33-8b9e-1a3fa074c478 line=190 pid=5708 pkg=space req_id= req_params=map[spaceID:[8d97f6ba-0879-4559-9883-5063316ca117] identityID:[81740d1a-f661-49d7-a17e-1e82202a5c0c]] space_id=8d97f6ba-0879-4559-9883-5063316ca117 
time="2017-08-18T10:14:58+07:00" level=error msg="database transaction failed!" err="space resource with id '8d97f6ba-0879-4559-9883-5063316ca117' not found" file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/application/transaction.go" func="github.com/fabric8-services/fabric8-auth/application.Transactional.func1" line=50 pid=5708 pkg=application.Transactional 
time="2017-08-18T10:14:58+07:00" level=info msg="an error occurred in our api" err="[0p5qCLUw] 404 not_found: space resource with id '8d97f6ba-0879-4559-9883-5063316ca117' not found" error_message="[0p5qCLUw] 404 not_found: space resource with id '8d97f6ba-0879-4559-9883-5063316ca117' not found" identity_id=e9e30c1f-c41c-4f33-8b9e-1a3fa074c478 pkg=jsonapi req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'space_resources' table with key 62634b54-b53f-4615-a3ee-9ee496b00e28" hook_name="mighti:record-a3676ee7-ac4e-440b-8f12-bc9fe50137dc" key=62634b54-b53f-4615-a3ee-9ee496b00e28 pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key f60225af-7202-4582-b3df-35efd7bfaf36" hook_name="mighti:record-a3676ee7-ac4e-440b-8f12-bc9fe50137dc" key=f60225af-7202-4582-b3df-35efd7bfaf36 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key adfeabc8-b763-468d-82e6-65b4e1b0ff1b" hook_name="mighti:record-a3676ee7-ac4e-440b-8f12-bc9fe50137dc" key=adfeabc8-b763-468d-82e6-65b4e1b0ff1b pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key e9e30c1f-c41c-4f33-8b9e-1a3fa074c478" hook_name="mighti:record-a3676ee7-ac4e-440b-8f12-bc9fe50137dc" key=e9e30c1f-c41c-4f33-8b9e-1a3fa074c478 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
[info] removing callback `mighti:record-a3676ee7-ac4e-440b-8f12-bc9fe50137dc` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestRemoveCollaboratorsWithRandomSpaceIDNotFound (0.02s)
=== RUN   TestRemoveCollaboratorsWithWrongUserIDFormatReturnsBadRequest
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=54486dd0-07ff-4b80-aaa5-fd4f7164fc23 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=54486dd0-07ff-4b80-aaa5-fd4f7164fc23 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=713ecf47-ec8b-4415-b7cb-904c86ffdcc4 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=713ecf47-ec8b-4415-b7cb-904c86ffdcc4 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=6de0b856-9e70-426a-a64a-a07413fa870c pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=6de0b856-9e70-426a-a64a-a07413fa870c pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Space resource created successfully" identity_id=54486dd0-07ff-4b80-aaa5-fd4f7164fc23 pkg=space req_id= space_resource_id=836a22fa-a08e-4f73-9581-8a8e66d767c4 
time="2017-08-18T10:14:58+07:00" level=error msg="unable to convert the identity ID to uuid v4" file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/controller/collaborators.go" func="github.com/fabric8-services/fabric8-auth/controller.(*CollaboratorsController).updatePolicy" identity_id=wrongFormatID line=182 pid=5708 pkg=controller req_id= req_params=map[spaceID:[b359d2a0-25ad-43e3-a93d-184cc014059b] identityID:[wrongFormatID]] 
time="2017-08-18T10:14:58+07:00" level=info msg="an error occurred in our api" err="[vRanNDRo] 400 bad_request: uuid: UUID string too short: wrongFormatID" error_message="[vRanNDRo] 400 bad_request: uuid: UUID string too short: wrongFormatID" identity_id=54486dd0-07ff-4b80-aaa5-fd4f7164fc23 pkg=jsonapi req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'space_resources' table with key 836a22fa-a08e-4f73-9581-8a8e66d767c4" hook_name="mighti:record-0ace5932-f625-424b-897e-2d334b90a97d" key=836a22fa-a08e-4f73-9581-8a8e66d767c4 pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 6de0b856-9e70-426a-a64a-a07413fa870c" hook_name="mighti:record-0ace5932-f625-424b-897e-2d334b90a97d" key=6de0b856-9e70-426a-a64a-a07413fa870c pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 713ecf47-ec8b-4415-b7cb-904c86ffdcc4" hook_name="mighti:record-0ace5932-f625-424b-897e-2d334b90a97d" key=713ecf47-ec8b-4415-b7cb-904c86ffdcc4 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 54486dd0-07ff-4b80-aaa5-fd4f7164fc23" hook_name="mighti:record-0ace5932-f625-424b-897e-2d334b90a97d" key=54486dd0-07ff-4b80-aaa5-fd4f7164fc23 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
[info] removing callback `mighti:record-0ace5932-f625-424b-897e-2d334b90a97d` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestRemoveCollaboratorsWithWrongUserIDFormatReturnsBadRequest (0.03s)
=== RUN   TestRemoveManyCollaboratorsFailsIfTryToRemoveLastCollaborator
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=c22f73d0-db5a-44bd-a1a0-8f421e8dc6ba pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=c22f73d0-db5a-44bd-a1a0-8f421e8dc6ba pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=e6a93040-4dcf-4ac6-a7a0-d8ab00b75a4c pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=e6a93040-4dcf-4ac6-a7a0-d8ab00b75a4c pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=28d487af-5f35-4490-b07d-2bbb38a3409b pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=28d487af-5f35-4490-b07d-2bbb38a3409b pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Space resource created successfully" identity_id=c22f73d0-db5a-44bd-a1a0-8f421e8dc6ba pkg=space req_id= space_resource_id=1a689a99-4ac0-4025-94e6-d7d072311244 
time="2017-08-18T10:14:58+07:00" level=info msg="an error occurred in our api" err="[LrkqtGAR] 400 bad_request: space should have at least one collaborator" error_message="[LrkqtGAR] 400 bad_request: space should have at least one collaborator" identity_id=c22f73d0-db5a-44bd-a1a0-8f421e8dc6ba pkg=jsonapi req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'space_resources' table with key 1a689a99-4ac0-4025-94e6-d7d072311244" hook_name="mighti:record-2fb96bb2-7d5b-458b-b6ba-4734bff6f533" key=1a689a99-4ac0-4025-94e6-d7d072311244 pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 28d487af-5f35-4490-b07d-2bbb38a3409b" hook_name="mighti:record-2fb96bb2-7d5b-458b-b6ba-4734bff6f533" key=28d487af-5f35-4490-b07d-2bbb38a3409b pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key e6a93040-4dcf-4ac6-a7a0-d8ab00b75a4c" hook_name="mighti:record-2fb96bb2-7d5b-458b-b6ba-4734bff6f533" key=e6a93040-4dcf-4ac6-a7a0-d8ab00b75a4c pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key c22f73d0-db5a-44bd-a1a0-8f421e8dc6ba" hook_name="mighti:record-2fb96bb2-7d5b-458b-b6ba-4734bff6f533" key=c22f73d0-db5a-44bd-a1a0-8f421e8dc6ba pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
[info] removing callback `mighti:record-2fb96bb2-7d5b-458b-b6ba-4734bff6f533` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestRemoveManyCollaboratorsFailsIfTryToRemoveLastCollaborator (0.02s)
	collaborators_blackbox_test.go:483: Checking collaborators: 
	collaborators_blackbox_test.go:484:   expecting: 
	collaborators_blackbox_test.go:486:   - c22f73d0-db5a-44bd-a1a0-8f421e8dc6ba
	collaborators_blackbox_test.go:488:   got: 
	collaborators_blackbox_test.go:492:   - c22f73d0-db5a-44bd-a1a0-8f421e8dc6ba
=== RUN   TestRemoveManyCollaboratorsOk
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=446c34b5-56d7-492e-8fb4-9a0fe926b75e pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=446c34b5-56d7-492e-8fb4-9a0fe926b75e pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=e53d4751-ce23-4bb6-9526-bae74d62b995 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=e53d4751-ce23-4bb6-9526-bae74d62b995 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=d8d2ceea-459a-4cbf-80e4-33679807dde3 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=d8d2ceea-459a-4cbf-80e4-33679807dde3 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Space resource created successfully" identity_id=446c34b5-56d7-492e-8fb4-9a0fe926b75e pkg=space req_id= space_resource_id=8beb2d7a-0023-414a-8ddb-44b38d699978 
time="2017-08-18T10:14:58+07:00" level=info msg="Space resource updated successfully" identity_id=446c34b5-56d7-492e-8fb4-9a0fe926b75e pkg=space req_id= space_resource_id=8beb2d7a-0023-414a-8ddb-44b38d699978 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'space_resources' table with key 8beb2d7a-0023-414a-8ddb-44b38d699978" hook_name="mighti:record-26a81934-26ca-404b-b9ee-81a925000bc0" key=8beb2d7a-0023-414a-8ddb-44b38d699978 pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key d8d2ceea-459a-4cbf-80e4-33679807dde3" hook_name="mighti:record-26a81934-26ca-404b-b9ee-81a925000bc0" key=d8d2ceea-459a-4cbf-80e4-33679807dde3 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key e53d4751-ce23-4bb6-9526-bae74d62b995" hook_name="mighti:record-26a81934-26ca-404b-b9ee-81a925000bc0" key=e53d4751-ce23-4bb6-9526-bae74d62b995 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 446c34b5-56d7-492e-8fb4-9a0fe926b75e" hook_name="mighti:record-26a81934-26ca-404b-b9ee-81a925000bc0" key=446c34b5-56d7-492e-8fb4-9a0fe926b75e pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
[info] removing callback `mighti:record-26a81934-26ca-404b-b9ee-81a925000bc0` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestRemoveManyCollaboratorsOk (0.03s)
	collaborators_blackbox_test.go:483: Checking collaborators: 
	collaborators_blackbox_test.go:484:   expecting: 
	collaborators_blackbox_test.go:486:   - 446c34b5-56d7-492e-8fb4-9a0fe926b75e
	collaborators_blackbox_test.go:486:   - e53d4751-ce23-4bb6-9526-bae74d62b995
	collaborators_blackbox_test.go:486:   - d8d2ceea-459a-4cbf-80e4-33679807dde3
	collaborators_blackbox_test.go:488:   got: 
	collaborators_blackbox_test.go:492:   - 446c34b5-56d7-492e-8fb4-9a0fe926b75e
	collaborators_blackbox_test.go:492:   - e53d4751-ce23-4bb6-9526-bae74d62b995
	collaborators_blackbox_test.go:492:   - d8d2ceea-459a-4cbf-80e4-33679807dde3
=== RUN   TestRemoveManyCollaboratorsUnauthorizedIfCurrentUserIsNotCollaborator
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=0700971f-7a4f-4a06-ad01-73d7053e11e2 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=0700971f-7a4f-4a06-ad01-73d7053e11e2 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=f9d80c07-2b7b-4151-bb2e-b972bef3aa13 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=f9d80c07-2b7b-4151-bb2e-b972bef3aa13 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=80b8828f-f64a-4237-8648-7c7f1a39cf47 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=80b8828f-f64a-4237-8648-7c7f1a39cf47 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Space resource created successfully" identity_id=0700971f-7a4f-4a06-ad01-73d7053e11e2 pkg=space req_id= space_resource_id=76e66e83-e9bc-43aa-a241-f762e7175c31 
time="2017-08-18T10:14:58+07:00" level=info msg="an error occurred in our api" err="[jPWhnqKv] 401 unauthorized: User not among space collaborators" error_message="[jPWhnqKv] 401 unauthorized: User not among space collaborators" identity_id=f9d80c07-2b7b-4151-bb2e-b972bef3aa13 pkg=jsonapi req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'space_resources' table with key 76e66e83-e9bc-43aa-a241-f762e7175c31" hook_name="mighti:record-0855ce15-b868-4d6f-8c57-a8150e3e241e" key=76e66e83-e9bc-43aa-a241-f762e7175c31 pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 80b8828f-f64a-4237-8648-7c7f1a39cf47" hook_name="mighti:record-0855ce15-b868-4d6f-8c57-a8150e3e241e" key=80b8828f-f64a-4237-8648-7c7f1a39cf47 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key f9d80c07-2b7b-4151-bb2e-b972bef3aa13" hook_name="mighti:record-0855ce15-b868-4d6f-8c57-a8150e3e241e" key=f9d80c07-2b7b-4151-bb2e-b972bef3aa13 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 0700971f-7a4f-4a06-ad01-73d7053e11e2" hook_name="mighti:record-0855ce15-b868-4d6f-8c57-a8150e3e241e" key=0700971f-7a4f-4a06-ad01-73d7053e11e2 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
[info] removing callback `mighti:record-0855ce15-b868-4d6f-8c57-a8150e3e241e` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestRemoveManyCollaboratorsUnauthorizedIfCurrentUserIsNotCollaborator (0.04s)
	collaborators_blackbox_test.go:483: Checking collaborators: 
	collaborators_blackbox_test.go:484:   expecting: 
	collaborators_blackbox_test.go:486:   - 0700971f-7a4f-4a06-ad01-73d7053e11e2
	collaborators_blackbox_test.go:488:   got: 
	collaborators_blackbox_test.go:492:   - 0700971f-7a4f-4a06-ad01-73d7053e11e2
=== RUN   TestRemoveManyCollaboratorsUnauthorizedIfNoToken
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=18f4eb5e-b67f-4858-bb74-a5a93e0237e2 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=18f4eb5e-b67f-4858-bb74-a5a93e0237e2 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=90c912fe-2d0e-4f33-b5c0-f93294317d3b pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=90c912fe-2d0e-4f33-b5c0-f93294317d3b pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=db69b40b-2f9c-4bd8-9d8d-97dce0bde4c3 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=db69b40b-2f9c-4bd8-9d8d-97dce0bde4c3 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Space resource created successfully" identity_id=18f4eb5e-b67f-4858-bb74-a5a93e0237e2 pkg=space req_id= space_resource_id=20fb6df6-388d-4823-8d66-460a48be7dce 
time="2017-08-18T10:14:58+07:00" level=error msg="Missing space authz service" file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/space/authz/authz.go" func="github.com/fabric8-services/fabric8-auth/space/authz.Authorize" line=191 pid=5708 pkg="space/authz" req_id= req_params=map[spaceID:[45e5a3d2-82ae-4be7-8237-d027ff657bdd]] space_id=45e5a3d2-82ae-4be7-8237-d027ff657bdd 
time="2017-08-18T10:14:58+07:00" level=info msg="an error occurred in our api" err="[AoqfiCfn] 401 unauthorized: missing space authz service" error_message="[AoqfiCfn] 401 unauthorized: missing space authz service" pkg=jsonapi req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'space_resources' table with key 20fb6df6-388d-4823-8d66-460a48be7dce" hook_name="mighti:record-d830126e-7705-41f2-adbf-36b1387a47e9" key=20fb6df6-388d-4823-8d66-460a48be7dce pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key db69b40b-2f9c-4bd8-9d8d-97dce0bde4c3" hook_name="mighti:record-d830126e-7705-41f2-adbf-36b1387a47e9" key=db69b40b-2f9c-4bd8-9d8d-97dce0bde4c3 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 90c912fe-2d0e-4f33-b5c0-f93294317d3b" hook_name="mighti:record-d830126e-7705-41f2-adbf-36b1387a47e9" key=90c912fe-2d0e-4f33-b5c0-f93294317d3b pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 18f4eb5e-b67f-4858-bb74-a5a93e0237e2" hook_name="mighti:record-d830126e-7705-41f2-adbf-36b1387a47e9" key=18f4eb5e-b67f-4858-bb74-a5a93e0237e2 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
[info] removing callback `mighti:record-d830126e-7705-41f2-adbf-36b1387a47e9` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestRemoveManyCollaboratorsUnauthorizedIfNoToken (0.03s)
=== RUN   TestRemoveManyCollaboratorsWithRandomSpaceIDNotFound
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=d9e00917-1fe8-4878-af2f-bf167e0cf712 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=d9e00917-1fe8-4878-af2f-bf167e0cf712 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=9ff9b6c5-14b3-4644-834d-94005a80f69e pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=9ff9b6c5-14b3-4644-834d-94005a80f69e pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=1d030576-a0a9-4714-af25-d26cd1794cd7 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=1d030576-a0a9-4714-af25-d26cd1794cd7 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Space resource created successfully" identity_id=d9e00917-1fe8-4878-af2f-bf167e0cf712 pkg=space req_id= space_resource_id=e0bc2a3a-741a-497a-8035-faaedd7e2ebf 
time="2017-08-18T10:14:58+07:00" level=error msg="Could not find space resource by space ID" file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/space/space_resource.go" func="github.com/fabric8-services/fabric8-auth/space.(*GormResourceRepository).LoadBySpace" identity_id=d9e00917-1fe8-4878-af2f-bf167e0cf712 line=190 pid=5708 pkg=space req_id= req_params=map[spaceID:[b2fd26fc-08a4-43e1-aebd-da024f8beeb1]] space_id=b2fd26fc-08a4-43e1-aebd-da024f8beeb1 
time="2017-08-18T10:14:58+07:00" level=error msg="database transaction failed!" err="space resource with id 'b2fd26fc-08a4-43e1-aebd-da024f8beeb1' not found" file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/application/transaction.go" func="github.com/fabric8-services/fabric8-auth/application.Transactional.func1" line=50 pid=5708 pkg=application.Transactional 
time="2017-08-18T10:14:58+07:00" level=info msg="an error occurred in our api" err="[d/GtNHYz] 404 not_found: space resource with id 'b2fd26fc-08a4-43e1-aebd-da024f8beeb1' not found" error_message="[d/GtNHYz] 404 not_found: space resource with id 'b2fd26fc-08a4-43e1-aebd-da024f8beeb1' not found" identity_id=d9e00917-1fe8-4878-af2f-bf167e0cf712 pkg=jsonapi req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'space_resources' table with key e0bc2a3a-741a-497a-8035-faaedd7e2ebf" hook_name="mighti:record-39a88dc4-603f-497c-9ddb-e3d95e8e6960" key=e0bc2a3a-741a-497a-8035-faaedd7e2ebf pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 1d030576-a0a9-4714-af25-d26cd1794cd7" hook_name="mighti:record-39a88dc4-603f-497c-9ddb-e3d95e8e6960" key=1d030576-a0a9-4714-af25-d26cd1794cd7 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 9ff9b6c5-14b3-4644-834d-94005a80f69e" hook_name="mighti:record-39a88dc4-603f-497c-9ddb-e3d95e8e6960" key=9ff9b6c5-14b3-4644-834d-94005a80f69e pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key d9e00917-1fe8-4878-af2f-bf167e0cf712" hook_name="mighti:record-39a88dc4-603f-497c-9ddb-e3d95e8e6960" key=d9e00917-1fe8-4878-af2f-bf167e0cf712 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
[info] removing callback `mighti:record-39a88dc4-603f-497c-9ddb-e3d95e8e6960` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestRemoveManyCollaboratorsWithRandomSpaceIDNotFound (0.02s)
=== RUN   TestRemoveManyCollaboratorsWithWrongUserIDFormatReturnsBadRequest
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=e0183f9a-029e-4a81-a795-799cbb064883 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=e0183f9a-029e-4a81-a795-799cbb064883 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=3d343601-9a82-4c68-a0f0-012261308370 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=3d343601-9a82-4c68-a0f0-012261308370 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=d2e7855b-7d3b-4355-8bd2-6d496daf8df3 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="created identity" identity_id=d2e7855b-7d3b-4355-8bd2-6d496daf8df3 pkg=test 
time="2017-08-18T10:14:58+07:00" level=info msg="Space resource created successfully" identity_id=e0183f9a-029e-4a81-a795-799cbb064883 pkg=space req_id= space_resource_id=c3050d95-6051-4398-9579-e2b1a2b37a4c 
time="2017-08-18T10:14:58+07:00" level=error msg="unable to convert the identity ID to uuid v4" file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/controller/collaborators.go" func="github.com/fabric8-services/fabric8-auth/controller.(*CollaboratorsController).updatePolicy" identity_id=wrongFormatID line=182 pid=5708 pkg=controller req_id= req_params=map[spaceID:[abec1db5-beff-4c21-8be1-f076185604fa]] 
time="2017-08-18T10:14:58+07:00" level=info msg="an error occurred in our api" err="[aKiQmmR7] 400 bad_request: uuid: UUID string too short: wrongFormatID" error_message="[aKiQmmR7] 400 bad_request: uuid: UUID string too short: wrongFormatID" identity_id=e0183f9a-029e-4a81-a795-799cbb064883 pkg=jsonapi req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'space_resources' table with key c3050d95-6051-4398-9579-e2b1a2b37a4c" hook_name="mighti:record-688d07eb-c901-45c2-ac30-910697694750" key=c3050d95-6051-4398-9579-e2b1a2b37a4c pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key d2e7855b-7d3b-4355-8bd2-6d496daf8df3" hook_name="mighti:record-688d07eb-c901-45c2-ac30-910697694750" key=d2e7855b-7d3b-4355-8bd2-6d496daf8df3 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 3d343601-9a82-4c68-a0f0-012261308370" hook_name="mighti:record-688d07eb-c901-45c2-ac30-910697694750" key=3d343601-9a82-4c68-a0f0-012261308370 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key e0183f9a-029e-4a81-a795-799cbb064883" hook_name="mighti:record-688d07eb-c901-45c2-ac30-910697694750" key=e0183f9a-029e-4a81-a795-799cbb064883 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
[info] removing callback `mighti:record-688d07eb-c901-45c2-ac30-910697694750` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestRemoveManyCollaboratorsWithWrongUserIDFormatReturnsBadRequest (0.03s)
--- PASS: TestRunCollaboratorsREST (0.74s)
=== RUN   TestCompareWithGolden
--- SKIP: TestCompareWithGolden (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestRunLinkREST
=== RUN   TestLinkIdPWithTokenRedirects
[info] removing callback `mighti:record` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- SKIP: TestLinkIdPWithTokenRedirects (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestLinkIdPWithoutTokenFails
[info] removing callback `mighti:record-2c5c183f-4e45-4ebe-af0b-bbc99d34606a` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- SKIP: TestLinkIdPWithoutTokenFails (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
--- PASS: TestRunLinkREST (0.00s)
=== RUN   TestRunLoginREST
=== RUN   TestLoginOK
[info] removing callback `mighti:record` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- SKIP: TestLoginOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
--- PASS: TestRunLoginREST (0.00s)
=== RUN   TestRunSearchUser
=== RUN   TestUsersSearchBadRequest
--- PASS: TestUsersSearchBadRequest (0.00s)
=== RUN   TestUsersSearchOK
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=754dc3cb-4888-4b49-85d4-bdc73490a422 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=8e430568-ffa6-4a4b-84f2-b854021616d6 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=516c10f1-71d5-4dde-98ac-f0dea76e9d30 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=f6dad72d-defc-4b9f-a89e-719d173b83fe pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=a9ca723f-aeb0-4cbc-983e-6b1ba58d765f pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=5666b4bb-4297-4813-a533-e2cb6eca11f1 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=82298793-6474-4054-ba67-e8494ff287a9 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=6d5a33b0-4fcd-45d1-af1e-29d9bd12d3d8 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=3d35a7bf-8eb3-4bb3-a983-e2c4f386204d pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=fba4252b-e120-4a3a-9c4d-2cbd5ad91b19 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=5eb461ed-4019-4cc6-9799-0b1a4a659f89 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=80cfde4d-d75c-44ff-880b-d387ed5de1f3 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=6edb8cc7-e657-4f3c-916c-f38fccb5827b pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=682887e8-a8e8-4be5-86fa-83d4b60bd450 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=ef0cfeeb-5ed5-47d7-bcb9-4a6b439cb229 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=2bb85739-3a33-419c-a0f8-d87f96f9e4dd pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=2a44e8d8-79f6-4bd2-8468-eb40db047900 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=3e6cec8c-a1fa-459d-a789-0ad3e8ee8259 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=8a19d10f-eb5e-44e0-8489-36678f58a6ac pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=44cc99a2-1b53-4195-a107-195a301ba602 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=8dc3df5b-715d-4aca-a78e-1be5c48d03c8 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=73a0dff1-859c-4e8a-bb7b-1fb1f144d2b7 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=63970c5a-93d8-4794-a0c6-cb94fd292633 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=b2cb70f2-0277-4da3-b69f-29f4e35f5074 pkg=account req_id= 
--- PASS: TestUsersSearchOK (0.06s)
--- PASS: TestRunSearchUser (0.07s)
=== RUN   TestRunStatusREST
=== RUN   TestShowStatusOK
[info] removing callback `mighti:record` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestShowStatusOK (0.00s)
--- PASS: TestRunStatusREST (0.00s)
=== RUN   TestRunTokenREST
=== RUN   TestRefreshTokenUsingInvalidTokenFails
[info] removing callback `mighti:record` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- SKIP: TestRefreshTokenUsingInvalidTokenFails (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestRefreshTokenUsingNilTokenFails
[info] removing callback `mighti:record-42068d8d-8a1a-4c0c-b0a8-928e3d797c93` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- SKIP: TestRefreshTokenUsingNilTokenFails (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestRefreshTokenUsingValidRefreshTokenOK
[info] removing callback `mighti:record-2c1ba545-10a2-4ffb-955b-e5c7e1f4e7b6` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- SKIP: TestRefreshTokenUsingValidRefreshTokenOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestTestUserTokenObtainedFromKeycloakOK
[info] removing callback `mighti:record-02a0fdcb-ebe5-4b89-b371-3dd713c0ab64` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- SKIP: TestTestUserTokenObtainedFromKeycloakOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
--- PASS: TestRunTokenREST (0.01s)
=== RUN   TestUsers
=== RUN   TestListUsersByEmailNotModifiedUsingIfNoneMatchHeader
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=199ea1e2-c869-4d38-81e4-71d6b3413234 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=00a318c4-52e2-46af-afda-3b19513f0133 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=be47dfd3-2606-44d4-879c-e66d36f09201 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="generate users tag" etag="F7Q/bB5akkQRK8HeXq0qGQ==" pkg="controller_test" users=1 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key be47dfd3-2606-44d4-879c-e66d36f09201" hook_name="mighti:record" key=be47dfd3-2606-44d4-879c-e66d36f09201 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'users' table with key 38f7b43d-c5b2-46a5-b952-927c10bc417d" hook_name="mighti:record" key=38f7b43d-c5b2-46a5-b952-927c10bc417d pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 00a318c4-52e2-46af-afda-3b19513f0133" hook_name="mighti:record" key=00a318c4-52e2-46af-afda-3b19513f0133 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 199ea1e2-c869-4d38-81e4-71d6b3413234" hook_name="mighti:record" key=199ea1e2-c869-4d38-81e4-71d6b3413234 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'users' table with key 27636c42-939e-404a-a428-e8aa11e39e66" hook_name="mighti:record" key=27636c42-939e-404a-a428-e8aa11e39e66 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestListUsersByEmailNotModifiedUsingIfNoneMatchHeader (0.03s)
=== RUN   TestListUsersByEmailOK
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=4551c9e2-2aef-4fb6-a8dd-134c8857ed0c pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=0465f3ba-4cde-4aac-a8b2-87b1980eec48 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Identity created!" identity_id=ede02fd2-ac17-4cd5-ae31-366588e58618 pkg=account req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key ede02fd2-ac17-4cd5-ae31-366588e58618" hook_name="mighti:record-a892fcb9-f3fc-48d1-84dc-5bb171210a06" key=ede02fd2-ac17-4cd5-ae31-366588e58618 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'users' table with key 638dfef9-ceb4-49ac-869f-5711072e8d17" hook_name="mighti:record-a892fcb9-f3fc-48d1-84dc-5bb171210a06" key=638dfef9-ceb4-49ac-869f-5711072e8d17 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 0465f3ba-4cde-4aac-a8b2-87b1980eec48" hook_name="mighti:record-a892fcb9-f3fc-48d1-84dc-5bb171210a06" key=0465f3ba-4cde-4aac-a8b2-87b1980eec48 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'identities' table with key 4551c9e2-2aef-4fb6-a8dd-134c8857ed0c" hook_name="mighti:record-a892fcb9-f3fc-48d1-84dc-5bb171210a06" key=4551c9e2-2aef-4fb6-a8dd-134c8857ed0c pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'users' table with key 56593da8-6807-4df5-b214-de1ad1f10b34" hook_name="mighti:record-a892fcb9-f3fc-48d1-84dc-5bb171210a06" key=56593da8-6807-4df5-b214-de1ad1f10b34 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-a892fcb9-f3fc-48d1-84dc-5bb171210a06` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestListUsersByEmailOK (0.03s)
	users_blackbox_test.go:794: Result #0: 4551c9e2-2aef-4fb6-a8dd-134c8857ed0c TestUpdateUserIntegration1233e054a76-f88c-44aa-b172-cf991f996828
=== RUN   TestListUsersByEmailOKEmptyResult
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=c9144554-3331-40c9-adb5-2726f7036487 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=ee464aac-786e-4420-82a1-1483d91178b5 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=31ab7094-0d03-4756-8e81-59a4723e067a pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key 31ab7094-0d03-4756-8e81-59a4723e067a" hook_name="mighti:record-7c35d843-3274-41cf-88dc-566914a18902" key=31ab7094-0d03-4756-8e81-59a4723e067a pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key ed62dd05-8048-4c04-a1d6-06c4ca3dbf0b" hook_name="mighti:record-7c35d843-3274-41cf-88dc-566914a18902" key=ed62dd05-8048-4c04-a1d6-06c4ca3dbf0b pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key ee464aac-786e-4420-82a1-1483d91178b5" hook_name="mighti:record-7c35d843-3274-41cf-88dc-566914a18902" key=ee464aac-786e-4420-82a1-1483d91178b5 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key c9144554-3331-40c9-adb5-2726f7036487" hook_name="mighti:record-7c35d843-3274-41cf-88dc-566914a18902" key=c9144554-3331-40c9-adb5-2726f7036487 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key c0ba4aca-6818-4ad9-a2a3-0dd4d0394510" hook_name="mighti:record-7c35d843-3274-41cf-88dc-566914a18902" key=c0ba4aca-6818-4ad9-a2a3-0dd4d0394510 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-7c35d843-3274-41cf-88dc-566914a18902` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestListUsersByEmailOKEmptyResult (0.03s)
=== RUN   TestListUsersByRegistrationCompletedOK
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=ec5caf8e-b53f-4a2e-9ef6-79f8c0d75304 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=3a183b10-c702-44ec-b5c0-165c8f4c1292 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=04708bf8-ae84-4500-a940-b21c236d6af6 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key 04708bf8-ae84-4500-a940-b21c236d6af6" hook_name="mighti:record-a85c66e9-309e-4056-9f24-49c7bc59be1c" key=04708bf8-ae84-4500-a940-b21c236d6af6 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key 61da97c1-dd9b-465d-897d-35a684fa21f4" hook_name="mighti:record-a85c66e9-309e-4056-9f24-49c7bc59be1c" key=61da97c1-dd9b-465d-897d-35a684fa21f4 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key 3a183b10-c702-44ec-b5c0-165c8f4c1292" hook_name="mighti:record-a85c66e9-309e-4056-9f24-49c7bc59be1c" key=3a183b10-c702-44ec-b5c0-165c8f4c1292 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key ec5caf8e-b53f-4a2e-9ef6-79f8c0d75304" hook_name="mighti:record-a85c66e9-309e-4056-9f24-49c7bc59be1c" key=ec5caf8e-b53f-4a2e-9ef6-79f8c0d75304 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key 72710100-650c-4b7b-b7b5-96e0cde6407f" hook_name="mighti:record-a85c66e9-309e-4056-9f24-49c7bc59be1c" key=72710100-650c-4b7b-b7b5-96e0cde6407f pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-a85c66e9-309e-4056-9f24-49c7bc59be1c` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestListUsersByRegistrationCompletedOK (0.03s)
	users_blackbox_test.go:847: Result #0: ec5caf8e-b53f-4a2e-9ef6-79f8c0d75304 TestUpdateUserIntegration123e122dd2a-9e14-4d0a-90e1-e404b6f0d4fc
	users_blackbox_test.go:847: Result #1: 04708bf8-ae84-4500-a940-b21c236d6af6 TestUpdateUserIntegration1230f22fdfe-bb0c-44fe-a71f-aed3f17e36e5
=== RUN   TestListUsersByUsernameNotModifiedUsingIfNoneMatchHeader
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=7ed880c6-7bf0-4e2d-b425-fa55af4e0eea pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=f941d715-6c7c-40b5-b0f3-532b915f6932 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=30804f3f-b537-4882-aebd-7a5a39c729ff pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="generate users tag" etag="5VcbTczeybyi/vxW6Kk06A==" pkg="controller_test" users=1 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key 30804f3f-b537-4882-aebd-7a5a39c729ff" hook_name="mighti:record-e1a4bf53-f7c8-4352-8a81-8f87fd2183d9" key=30804f3f-b537-4882-aebd-7a5a39c729ff pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key 5225df32-9ef4-4b06-9590-67602ddc9220" hook_name="mighti:record-e1a4bf53-f7c8-4352-8a81-8f87fd2183d9" key=5225df32-9ef4-4b06-9590-67602ddc9220 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key f941d715-6c7c-40b5-b0f3-532b915f6932" hook_name="mighti:record-e1a4bf53-f7c8-4352-8a81-8f87fd2183d9" key=f941d715-6c7c-40b5-b0f3-532b915f6932 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key 7ed880c6-7bf0-4e2d-b425-fa55af4e0eea" hook_name="mighti:record-e1a4bf53-f7c8-4352-8a81-8f87fd2183d9" key=7ed880c6-7bf0-4e2d-b425-fa55af4e0eea pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key 3b4b8c7d-3957-4cd0-b54d-9452309c4d37" hook_name="mighti:record-e1a4bf53-f7c8-4352-8a81-8f87fd2183d9" key=3b4b8c7d-3957-4cd0-b54d-9452309c4d37 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-e1a4bf53-f7c8-4352-8a81-8f87fd2183d9` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestListUsersByUsernameNotModifiedUsingIfNoneMatchHeader (0.03s)
=== RUN   TestListUsersByUsernameOK
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=7108ff44-bce9-405f-8357-2f2260aef757 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=f225b827-fa59-4f9f-83ef-1e960f5cdf26 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=7fbfa016-1ea5-42d2-9206-f035af205707 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key 7fbfa016-1ea5-42d2-9206-f035af205707" hook_name="mighti:record-097d8457-1998-4c92-be5f-054d4f8eed3d" key=7fbfa016-1ea5-42d2-9206-f035af205707 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key 0d345c86-7753-4add-9c0e-554eb7f6f838" hook_name="mighti:record-097d8457-1998-4c92-be5f-054d4f8eed3d" key=0d345c86-7753-4add-9c0e-554eb7f6f838 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key f225b827-fa59-4f9f-83ef-1e960f5cdf26" hook_name="mighti:record-097d8457-1998-4c92-be5f-054d4f8eed3d" key=f225b827-fa59-4f9f-83ef-1e960f5cdf26 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key 7108ff44-bce9-405f-8357-2f2260aef757" hook_name="mighti:record-097d8457-1998-4c92-be5f-054d4f8eed3d" key=7108ff44-bce9-405f-8357-2f2260aef757 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key 5fde94cc-14af-4d8d-a575-2a2d72b35fc5" hook_name="mighti:record-097d8457-1998-4c92-be5f-054d4f8eed3d" key=5fde94cc-14af-4d8d-a575-2a2d72b35fc5 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-097d8457-1998-4c92-be5f-054d4f8eed3d` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestListUsersByUsernameOK (0.02s)
	users_blackbox_test.go:743: Result #0: 7108ff44-bce9-405f-8357-2f2260aef757 TestUpdateUserIntegration12336581c08-7939-4e5f-95e3-39902f761656
=== RUN   TestListUsersByUsernameOKEmptyResult
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=8d7dbb08-c804-415f-b193-ae53fb9dc104 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=8d3447d1-fb14-4957-b1a5-b6892ee78ec3 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=3503abec-3b15-4232-8dcf-d3a76daf379f pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key 3503abec-3b15-4232-8dcf-d3a76daf379f" hook_name="mighti:record-6c5066ab-ea0c-4ea1-be00-25fb2d6cf7cc" key=3503abec-3b15-4232-8dcf-d3a76daf379f pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key cb3c37d4-3b01-4524-8279-e1ded52b776d" hook_name="mighti:record-6c5066ab-ea0c-4ea1-be00-25fb2d6cf7cc" key=cb3c37d4-3b01-4524-8279-e1ded52b776d pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key 8d3447d1-fb14-4957-b1a5-b6892ee78ec3" hook_name="mighti:record-6c5066ab-ea0c-4ea1-be00-25fb2d6cf7cc" key=8d3447d1-fb14-4957-b1a5-b6892ee78ec3 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key 8d7dbb08-c804-415f-b193-ae53fb9dc104" hook_name="mighti:record-6c5066ab-ea0c-4ea1-be00-25fb2d6cf7cc" key=8d7dbb08-c804-415f-b193-ae53fb9dc104 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key 0af146b1-e9bd-4043-90d3-15cd7786546d" hook_name="mighti:record-6c5066ab-ea0c-4ea1-be00-25fb2d6cf7cc" key=0af146b1-e9bd-4043-90d3-15cd7786546d pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-6c5066ab-ea0c-4ea1-be00-25fb2d6cf7cc` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestListUsersByUsernameOKEmptyResult (0.02s)
=== RUN   TestListUsersNotModifiedUsingIfModifiedSinceHeader
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=98c5c31b-cc29-41a5-89a8-6bff0d6bf7d6 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=4d1683d5-5f9d-401c-a7e5-19b4c7918397 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=e8e47421-4666-4104-955c-6c2bcefb3f68 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key e8e47421-4666-4104-955c-6c2bcefb3f68" hook_name="mighti:record-440202ea-1ea5-4745-a281-f36e12d40fa7" key=e8e47421-4666-4104-955c-6c2bcefb3f68 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key 97b9cadc-758e-41fd-b98a-bb8fdc68a124" hook_name="mighti:record-440202ea-1ea5-4745-a281-f36e12d40fa7" key=97b9cadc-758e-41fd-b98a-bb8fdc68a124 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key 4d1683d5-5f9d-401c-a7e5-19b4c7918397" hook_name="mighti:record-440202ea-1ea5-4745-a281-f36e12d40fa7" key=4d1683d5-5f9d-401c-a7e5-19b4c7918397 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key 98c5c31b-cc29-41a5-89a8-6bff0d6bf7d6" hook_name="mighti:record-440202ea-1ea5-4745-a281-f36e12d40fa7" key=98c5c31b-cc29-41a5-89a8-6bff0d6bf7d6 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key f519724c-faeb-4891-869b-8e1eaa1de976" hook_name="mighti:record-440202ea-1ea5-4745-a281-f36e12d40fa7" key=f519724c-faeb-4891-869b-8e1eaa1de976 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-440202ea-1ea5-4745-a281-f36e12d40fa7` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestListUsersNotModifiedUsingIfModifiedSinceHeader (0.02s)
=== RUN   TestListUsersOK
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=9b6473da-191c-4c50-b6e0-cf3aceea6a13 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=f77d0ec8-fb8d-4b1e-8b1a-41783eaac30d pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=9ae9eccb-b1dc-4242-819d-7ad3051c49fd pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key 9ae9eccb-b1dc-4242-819d-7ad3051c49fd" hook_name="mighti:record-9a2a588d-81f9-4430-9ab1-d7e3386f2d12" key=9ae9eccb-b1dc-4242-819d-7ad3051c49fd pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key 11a3bdb0-75b1-4413-b7f6-ddd7434d5fa8" hook_name="mighti:record-9a2a588d-81f9-4430-9ab1-d7e3386f2d12" key=11a3bdb0-75b1-4413-b7f6-ddd7434d5fa8 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key f77d0ec8-fb8d-4b1e-8b1a-41783eaac30d" hook_name="mighti:record-9a2a588d-81f9-4430-9ab1-d7e3386f2d12" key=f77d0ec8-fb8d-4b1e-8b1a-41783eaac30d pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key 9b6473da-191c-4c50-b6e0-cf3aceea6a13" hook_name="mighti:record-9a2a588d-81f9-4430-9ab1-d7e3386f2d12" key=9b6473da-191c-4c50-b6e0-cf3aceea6a13 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key f775ab99-e155-469e-876a-76d46ef3709a" hook_name="mighti:record-9a2a588d-81f9-4430-9ab1-d7e3386f2d12" key=f775ab99-e155-469e-876a-76d46ef3709a pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-9a2a588d-81f9-4430-9ab1-d7e3386f2d12` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestListUsersOK (0.03s)
=== RUN   TestListUsersOKUsingExpiredIfModifiedSinceHeader
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=9b249217-7b51-47d5-a4b2-b94a87c6e787 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=698a4d0f-7c6a-4261-8c25-cd9d3bd53fe8 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=d95e9199-73e5-474f-84e4-568cdf300701 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key d95e9199-73e5-474f-84e4-568cdf300701" hook_name="mighti:record-f7188e64-b5ba-44a1-bba0-07c5107f680a" key=d95e9199-73e5-474f-84e4-568cdf300701 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key b73dee4d-5774-48a7-818a-7692d5ebc112" hook_name="mighti:record-f7188e64-b5ba-44a1-bba0-07c5107f680a" key=b73dee4d-5774-48a7-818a-7692d5ebc112 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key 698a4d0f-7c6a-4261-8c25-cd9d3bd53fe8" hook_name="mighti:record-f7188e64-b5ba-44a1-bba0-07c5107f680a" key=698a4d0f-7c6a-4261-8c25-cd9d3bd53fe8 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key 9b249217-7b51-47d5-a4b2-b94a87c6e787" hook_name="mighti:record-f7188e64-b5ba-44a1-bba0-07c5107f680a" key=9b249217-7b51-47d5-a4b2-b94a87c6e787 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key 37699326-315c-46a9-b5d1-59f8bae9617c" hook_name="mighti:record-f7188e64-b5ba-44a1-bba0-07c5107f680a" key=37699326-315c-46a9-b5d1-59f8bae9617c pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-f7188e64-b5ba-44a1-bba0-07c5107f680a` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestListUsersOKUsingExpiredIfModifiedSinceHeader (0.03s)
=== RUN   TestListUsersOKUsingExpiredIfNoneMatchHeader
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=f3ce2934-5f98-4e9a-9a81-c3dc3f08f94a pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=b8f1d88a-bf80-4a9a-b7cf-2c8d24ed44ff pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=ba88e642-3c56-488d-aaf5-67d5a4f9e633 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key ba88e642-3c56-488d-aaf5-67d5a4f9e633" hook_name="mighti:record-06704bf6-2e48-4b87-b3db-b52a3dfbfcc8" key=ba88e642-3c56-488d-aaf5-67d5a4f9e633 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key 9e31cc2e-38b4-451a-a84a-479aae48adfc" hook_name="mighti:record-06704bf6-2e48-4b87-b3db-b52a3dfbfcc8" key=9e31cc2e-38b4-451a-a84a-479aae48adfc pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key b8f1d88a-bf80-4a9a-b7cf-2c8d24ed44ff" hook_name="mighti:record-06704bf6-2e48-4b87-b3db-b52a3dfbfcc8" key=b8f1d88a-bf80-4a9a-b7cf-2c8d24ed44ff pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key f3ce2934-5f98-4e9a-9a81-c3dc3f08f94a" hook_name="mighti:record-06704bf6-2e48-4b87-b3db-b52a3dfbfcc8" key=f3ce2934-5f98-4e9a-9a81-c3dc3f08f94a pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key 1a25b474-dd7c-4523-b94c-e7fe02a23c1a" hook_name="mighti:record-06704bf6-2e48-4b87-b3db-b52a3dfbfcc8" key=1a25b474-dd7c-4523-b94c-e7fe02a23c1a pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-06704bf6-2e48-4b87-b3db-b52a3dfbfcc8` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestListUsersOKUsingExpiredIfNoneMatchHeader (0.03s)
=== RUN   TestListUsersWithMissingKeycloakIdentityOK
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=caa9e1a6-b610-428a-9206-5101a4d5935a pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key caa9e1a6-b610-428a-9206-5101a4d5935a" hook_name="mighti:record-4d9c49df-54a2-4a9c-8e34-7f8d70325b3b" key=caa9e1a6-b610-428a-9206-5101a4d5935a pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key 651c8e91-53d7-428e-b86c-03b49c7d13fd" hook_name="mighti:record-4d9c49df-54a2-4a9c-8e34-7f8d70325b3b" key=651c8e91-53d7-428e-b86c-03b49c7d13fd pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key 74093f02-769a-45cb-aeeb-fe6f12a2a2d8" hook_name="mighti:record-4d9c49df-54a2-4a9c-8e34-7f8d70325b3b" key=74093f02-769a-45cb-aeeb-fe6f12a2a2d8 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-4d9c49df-54a2-4a9c-8e34-7f8d70325b3b` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestListUsersWithMissingKeycloakIdentityOK (0.02s)
=== RUN   TestPatchUserContextInformation
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=2c5ee0a7-e737-436d-a7d6-84ad111e12f5 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key 2c5ee0a7-e737-436d-a7d6-84ad111e12f5" hook_name="mighti:record-76579c21-1571-4d5f-bb4e-3f35afcde840" key=2c5ee0a7-e737-436d-a7d6-84ad111e12f5 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key 40d3a45c-fac7-41ab-8c43-3850265e3c4e" hook_name="mighti:record-76579c21-1571-4d5f-bb4e-3f35afcde840" key=40d3a45c-fac7-41ab-8c43-3850265e3c4e pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-76579c21-1571-4d5f-bb4e-3f35afcde840` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestPatchUserContextInformation (0.03s)
=== RUN   TestShowUserBadRequest
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=bfd5d8c7-d3c0-4d50-a142-4236b3e5bba6 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="an error occurred in our api" err="Bad value for parameter 'identity_id': 'invaliduuid'" error_message="Bad value for parameter 'identity_id': 'invaliduuid'" pkg=jsonapi req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key bfd5d8c7-d3c0-4d50-a142-4236b3e5bba6" hook_name="mighti:record-2b23e7f9-6172-4451-9aff-56d16ad86b1d" key=bfd5d8c7-d3c0-4d50-a142-4236b3e5bba6 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key a35ca7de-028e-4d8e-bfab-9dadbca023f8" hook_name="mighti:record-2b23e7f9-6172-4451-9aff-56d16ad86b1d" key=a35ca7de-028e-4d8e-bfab-9dadbca023f8 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-2b23e7f9-6172-4451-9aff-56d16ad86b1d` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestShowUserBadRequest (0.01s)
=== RUN   TestShowUserNotFound
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=c303618d-fd55-439d-9127-5dc12e6437c4 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="an error occurred in our api" err="identity with id '078672e9-981e-4731-92a6-1d2b762ea6f8' not found" error_message="identity with id '078672e9-981e-4731-92a6-1d2b762ea6f8' not found" pkg=jsonapi req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key c303618d-fd55-439d-9127-5dc12e6437c4" hook_name="mighti:record-a919e5db-c50e-4779-813e-29b748e51714" key=c303618d-fd55-439d-9127-5dc12e6437c4 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key d98d1ada-546e-4d77-b157-5148595ee0d3" hook_name="mighti:record-a919e5db-c50e-4779-813e-29b748e51714" key=d98d1ada-546e-4d77-b157-5148595ee0d3 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-a919e5db-c50e-4779-813e-29b748e51714` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestShowUserNotFound (0.01s)
=== RUN   TestShowUserNotModifiedUsingIfModifedSinceHeader
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=66f6e683-6a45-4cae-8ff8-20f154a7ad12 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key 66f6e683-6a45-4cae-8ff8-20f154a7ad12" hook_name="mighti:record-71dfde54-1859-43ee-945f-c562d87b13aa" key=66f6e683-6a45-4cae-8ff8-20f154a7ad12 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key 6ef407d3-480b-4662-a886-5f0542cad99e" hook_name="mighti:record-71dfde54-1859-43ee-945f-c562d87b13aa" key=6ef407d3-480b-4662-a886-5f0542cad99e pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-71dfde54-1859-43ee-945f-c562d87b13aa` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestShowUserNotModifiedUsingIfModifedSinceHeader (0.01s)
=== RUN   TestShowUserNotModifiedUsingIfNoneMatchHeader
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=ed9b6725-1e6a-470e-9478-e6ee7ee43f3a pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key ed9b6725-1e6a-470e-9478-e6ee7ee43f3a" hook_name="mighti:record-66a91e14-c352-4f03-8b9c-b7434d45ff35" key=ed9b6725-1e6a-470e-9478-e6ee7ee43f3a pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key b98f0587-aa94-43fd-a46c-41cd559f2de8" hook_name="mighti:record-66a91e14-c352-4f03-8b9c-b7434d45ff35" key=b98f0587-aa94-43fd-a46c-41cd559f2de8 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-66a91e14-c352-4f03-8b9c-b7434d45ff35` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestShowUserNotModifiedUsingIfNoneMatchHeader (0.01s)
=== RUN   TestShowUserOK
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=12601f4d-2d0a-43cb-b00f-443ba6e933c8 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key 12601f4d-2d0a-43cb-b00f-443ba6e933c8" hook_name="mighti:record-f4e5d8c1-d1c9-472f-8b67-db407a16c3f7" key=12601f4d-2d0a-43cb-b00f-443ba6e933c8 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key 68ab4150-d738-4bdd-b7c1-8570ffb8b9a4" hook_name="mighti:record-f4e5d8c1-d1c9-472f-8b67-db407a16c3f7" key=68ab4150-d738-4bdd-b7c1-8570ffb8b9a4 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-f4e5d8c1-d1c9-472f-8b67-db407a16c3f7` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestShowUserOK (0.01s)
=== RUN   TestShowUserOKUsingExpiredIfModifedSinceHeader
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=57aa0209-5631-4685-95c9-9e6b785f2677 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key 57aa0209-5631-4685-95c9-9e6b785f2677" hook_name="mighti:record-be0f553e-f9b7-4a3c-a57e-05fcb3813b7b" key=57aa0209-5631-4685-95c9-9e6b785f2677 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key 5f75d0a3-6771-4158-a172-1905e61a49cd" hook_name="mighti:record-be0f553e-f9b7-4a3c-a57e-05fcb3813b7b" key=5f75d0a3-6771-4158-a172-1905e61a49cd pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-be0f553e-f9b7-4a3c-a57e-05fcb3813b7b` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestShowUserOKUsingExpiredIfModifedSinceHeader (0.01s)
=== RUN   TestShowUserOKUsingExpiredIfNoneMatchHeader
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=7bc5d933-f12f-4823-98e1-6c2054b8b99c pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key 7bc5d933-f12f-4823-98e1-6c2054b8b99c" hook_name="mighti:record-d345745a-c44f-47b4-bf01-a0de7155e746" key=7bc5d933-f12f-4823-98e1-6c2054b8b99c pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key 13dc885f-1e8d-452a-ae4b-23e8f374115d" hook_name="mighti:record-d345745a-c44f-47b4-bf01-a0de7155e746" key=13dc885f-1e8d-452a-ae4b-23e8f374115d pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-d345745a-c44f-47b4-bf01-a0de7155e746` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestShowUserOKUsingExpiredIfNoneMatchHeader (0.01s)
=== RUN   TestUpdateExistingEmailForbidden
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=00019e1e-67f7-4be1-8d39-8f7a846eb6d9 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=ca22df75-5db2-4c2f-8832-976449165e6f pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="an error occurred in our api" err="[K4GqmIuJ] 400 invalid_request: email address: 77bfad1a-1366-4dc6-a19a-ab6ad342074aprimaryForUpdat7e@example.com is already in use" error_message="[K4GqmIuJ] 400 invalid_request: email address: 77bfad1a-1366-4dc6-a19a-ab6ad342074aprimaryForUpdat7e@example.com is already in use" identity_id=ca22df75-5db2-4c2f-8832-976449165e6f pkg=jsonapi req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key ca22df75-5db2-4c2f-8832-976449165e6f" hook_name="mighti:record-abe8ec0a-ba81-4c74-a112-8fe78a87efc2" key=ca22df75-5db2-4c2f-8832-976449165e6f pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key d541f5b8-fd0a-4f16-8aa9-667b56c8d1b9" hook_name="mighti:record-abe8ec0a-ba81-4c74-a112-8fe78a87efc2" key=d541f5b8-fd0a-4f16-8aa9-667b56c8d1b9 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key 00019e1e-67f7-4be1-8d39-8f7a846eb6d9" hook_name="mighti:record-abe8ec0a-ba81-4c74-a112-8fe78a87efc2" key=00019e1e-67f7-4be1-8d39-8f7a846eb6d9 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key e365ab8d-6230-4cba-af59-959e486e7288" hook_name="mighti:record-abe8ec0a-ba81-4c74-a112-8fe78a87efc2" key=e365ab8d-6230-4cba-af59-959e486e7288 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-abe8ec0a-ba81-4c74-a112-8fe78a87efc2` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestUpdateExistingEmailForbidden (0.02s)
=== RUN   TestUpdateExistingUsernameForbidden
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=34b72d5c-6a37-467e-b17c-00ada4b23fd9 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=e673de20-b7ea-41e7-be3f-ec1753f43b58 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="an error occurred in our api" err="[tFr8Vj4J] 400 invalid_request: username : TestUpdateUserIntegration123baf0eacf-1cda-4fd1-9672-486f87e14009 is already in use" error_message="[tFr8Vj4J] 400 invalid_request: username : TestUpdateUserIntegration123baf0eacf-1cda-4fd1-9672-486f87e14009 is already in use" identity_id=e673de20-b7ea-41e7-be3f-ec1753f43b58 pkg=jsonapi req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key e673de20-b7ea-41e7-be3f-ec1753f43b58" hook_name="mighti:record-12eca9c7-279b-48c5-8aee-0eea76c9493b" key=e673de20-b7ea-41e7-be3f-ec1753f43b58 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key e7abcfdf-0a28-41be-ae72-cda8867e9dbb" hook_name="mighti:record-12eca9c7-279b-48c5-8aee-0eea76c9493b" key=e7abcfdf-0a28-41be-ae72-cda8867e9dbb pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key 34b72d5c-6a37-467e-b17c-00ada4b23fd9" hook_name="mighti:record-12eca9c7-279b-48c5-8aee-0eea76c9493b" key=34b72d5c-6a37-467e-b17c-00ada4b23fd9 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key 384fb9b6-69e8-460c-811c-98777ebd785f" hook_name="mighti:record-12eca9c7-279b-48c5-8aee-0eea76c9493b" key=384fb9b6-69e8-460c-811c-98777ebd785f pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-12eca9c7-279b-48c5-8aee-0eea76c9493b` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestUpdateExistingUsernameForbidden (0.02s)
=== RUN   TestUpdateRegistrationCompletedAndUsernameOK
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=e150b1c4-bb69-4ab8-89e6-7470770cc601 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key e150b1c4-bb69-4ab8-89e6-7470770cc601" hook_name="mighti:record-3c7a53e4-68b4-41c3-bb37-d03d4811cfbe" key=e150b1c4-bb69-4ab8-89e6-7470770cc601 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key 467e5c6a-ee23-4573-9efd-a6e586530e31" hook_name="mighti:record-3c7a53e4-68b4-41c3-bb37-d03d4811cfbe" key=467e5c6a-ee23-4573-9efd-a6e586530e31 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-3c7a53e4-68b4-41c3-bb37-d03d4811cfbe` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestUpdateRegistrationCompletedAndUsernameOK (0.02s)
=== RUN   TestUpdateRegistrationCompletedBadRequest
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=56a2875c-7621-47ef-b868-3a89f1d1b6ec pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="an error occurred in our api" err="[dyzlLopL] 400 invalid_request: invalid value assigned to registration_completed for identity with id 56a2875c-7621-47ef-b868-3a89f1d1b6ec and user with id aea6a06b-6d0a-40d0-afc3-717aa4112c0a" error_message="[dyzlLopL] 400 invalid_request: invalid value assigned to registration_completed for identity with id 56a2875c-7621-47ef-b868-3a89f1d1b6ec and user with id aea6a06b-6d0a-40d0-afc3-717aa4112c0a" identity_id=56a2875c-7621-47ef-b868-3a89f1d1b6ec pkg=jsonapi req_id= 
time="2017-08-18T10:14:59+07:00" level=error msg="invalid parameter assignment" file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/controller/users.go" func="github.com/fabric8-services/fabric8-auth/controller.(*UsersController).Update.func1" identity_id=56a2875c-7621-47ef-b868-3a89f1d1b6ec line=243 pid=5708 pkg="controller.(*UsersController).Update" registration_completed=false req_id= user_id=aea6a06b-6d0a-40d0-afc3-717aa4112c0a 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key 56a2875c-7621-47ef-b868-3a89f1d1b6ec" hook_name="mighti:record-b6bf68e8-9f2c-4726-922c-903016a6831d" key=56a2875c-7621-47ef-b868-3a89f1d1b6ec pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key aea6a06b-6d0a-40d0-afc3-717aa4112c0a" hook_name="mighti:record-b6bf68e8-9f2c-4726-922c-903016a6831d" key=aea6a06b-6d0a-40d0-afc3-717aa4112c0a pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-b6bf68e8-9f2c-4726-922c-903016a6831d` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestUpdateRegistrationCompletedBadRequest (0.02s)
=== RUN   TestUpdateRegistrationCompletedOK
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=0c50de8f-57ed-4beb-9249-77b329fc239d pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key 0c50de8f-57ed-4beb-9249-77b329fc239d" hook_name="mighti:record-74468b91-78cb-48c0-998a-4114d3995cfe" key=0c50de8f-57ed-4beb-9249-77b329fc239d pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key 54eb2afa-dfe9-41c9-a63d-db430a4edd4e" hook_name="mighti:record-74468b91-78cb-48c0-998a-4114d3995cfe" key=54eb2afa-dfe9-41c9-a63d-db430a4edd4e pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-74468b91-78cb-48c0-998a-4114d3995cfe` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestUpdateRegistrationCompletedOK (0.02s)
=== RUN   TestUpdateUserNameMulitpleTimesForbidden
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=f00f2fff-0419-4262-8d6c-cd33654e4ba4 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="an error occurred in our api" err="[KU0YIBRF] 400 invalid_request: username cannot be updated more than once for identity id f00f2fff-0419-4262-8d6c-cd33654e4ba4 " error_message="[KU0YIBRF] 400 invalid_request: username cannot be updated more than once for identity id f00f2fff-0419-4262-8d6c-cd33654e4ba4 " identity_id=f00f2fff-0419-4262-8d6c-cd33654e4ba4 pkg=jsonapi req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key f00f2fff-0419-4262-8d6c-cd33654e4ba4" hook_name="mighti:record-e80fc493-33d8-4875-9334-4b17fdbc18db" key=f00f2fff-0419-4262-8d6c-cd33654e4ba4 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key c5b2a4b2-0b67-4f95-8cdb-073abc6eb1b8" hook_name="mighti:record-e80fc493-33d8-4875-9334-4b17fdbc18db" key=c5b2a4b2-0b67-4f95-8cdb-073abc6eb1b8 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-e80fc493-33d8-4875-9334-4b17fdbc18db` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestUpdateUserNameMulitpleTimesForbidden (0.02s)
=== RUN   TestUpdateUserNameMulitpleTimesOK
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=f230cdb3-27f5-4680-a98c-aa27865adfd6 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key f230cdb3-27f5-4680-a98c-aa27865adfd6" hook_name="mighti:record-61d75b8b-d262-4b47-9a8d-78fe8496c507" key=f230cdb3-27f5-4680-a98c-aa27865adfd6 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key 08227320-8004-4a58-ab31-7133c522a810" hook_name="mighti:record-61d75b8b-d262-4b47-9a8d-78fe8496c507" key=08227320-8004-4a58-ab31-7133c522a810 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-61d75b8b-d262-4b47-9a8d-78fe8496c507` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestUpdateUserNameMulitpleTimesOK (0.02s)
=== RUN   TestUpdateUserOK
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=e81fddf4-7617-40e4-b548-ae8947453b85 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key e81fddf4-7617-40e4-b548-ae8947453b85" hook_name="mighti:record-eeec69f1-c39f-445d-a57d-d95a8d20f6e7" key=e81fddf4-7617-40e4-b548-ae8947453b85 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key f1902427-77f4-488a-8d85-c2f8fd09a2fd" hook_name="mighti:record-eeec69f1-c39f-445d-a57d-d95a8d20f6e7" key=f1902427-77f4-488a-8d85-c2f8fd09a2fd pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-eeec69f1-c39f-445d-a57d-d95a8d20f6e7` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestUpdateUserOK (0.02s)
=== RUN   TestUpdateUserOKWithoutContextInfo
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=b33ad717-9f02-42ce-9899-4a5f2392b7f5 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key b33ad717-9f02-42ce-9899-4a5f2392b7f5" hook_name="mighti:record-d587c214-1d39-4d58-9dfd-035ad0644b4c" key=b33ad717-9f02-42ce-9899-4a5f2392b7f5 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key 8c2eec43-9126-439f-862e-a49d94fafe7e" hook_name="mighti:record-d587c214-1d39-4d58-9dfd-035ad0644b4c" key=8c2eec43-9126-439f-862e-a49d94fafe7e pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-d587c214-1d39-4d58-9dfd-035ad0644b4c` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestUpdateUserOKWithoutContextInfo (0.02s)
=== RUN   TestUpdateUserUnauthorized
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=d4b5bad2-b2a4-45a3-869d-4faafc586e01 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=error msg="missing token manager" file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/login/service.go" func="github.com/fabric8-services/fabric8-auth/login.ContextIdentity" line=875 pid=5708 pkg=login req_id= token=<nil> 
time="2017-08-18T10:14:59+07:00" level=info msg="an error occurred in our api" err="[hWAyDVab] 401 unauthorized: Missing token manager" error_message="[hWAyDVab] 401 unauthorized: Missing token manager" pkg=jsonapi req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key d4b5bad2-b2a4-45a3-869d-4faafc586e01" hook_name="mighti:record-f301413b-ae8a-4a4b-8621-e381f9a72908" key=d4b5bad2-b2a4-45a3-869d-4faafc586e01 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key 50748e46-b82b-454f-a350-5499e91bc6a0" hook_name="mighti:record-f301413b-ae8a-4a4b-8621-e381f9a72908" key=50748e46-b82b-454f-a350-5499e91bc6a0 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-f301413b-ae8a-4a4b-8621-e381f9a72908` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestUpdateUserUnauthorized (0.01s)
=== RUN   TestUpdateUserUnsetVariableInContextInfo
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=7e1407f3-3880-43f3-b653-52576f717a2e pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key 7e1407f3-3880-43f3-b653-52576f717a2e" hook_name="mighti:record-9a11c447-5fe3-4444-9b90-73a54d1034b1" key=7e1407f3-3880-43f3-b653-52576f717a2e pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key 251efad7-2a52-4e5c-8ccc-134f8e1314f3" hook_name="mighti:record-9a11c447-5fe3-4444-9b90-73a54d1034b1" key=251efad7-2a52-4e5c-8ccc-134f8e1314f3 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-9a11c447-5fe3-4444-9b90-73a54d1034b1` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestUpdateUserUnsetVariableInContextInfo (0.03s)
=== RUN   TestUpdateUserVariableSpacesInNameOK
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=763b737f-2f81-49a6-b178-62e2da82c46b pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key 763b737f-2f81-49a6-b178-62e2da82c46b" hook_name="mighti:record-e0deec65-c982-4bfc-be7a-6d65f2576ea8" key=763b737f-2f81-49a6-b178-62e2da82c46b pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key 18f47986-fc2e-4db4-b96f-e30d6422a77e" hook_name="mighti:record-e0deec65-c982-4bfc-be7a-6d65f2576ea8" key=18f47986-fc2e-4db4-b96f-e30d6422a77e pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-e0deec65-c982-4bfc-be7a-6d65f2576ea8` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestUpdateUserVariableSpacesInNameOK (0.02s)
=== RUN   TestUpdateUserWithInvalidEmail
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=02e8194a-f24f-4c29-a565-23ccaf299ca2 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="an error occurred in our api" err="[813moP0E] 400 invalid_request: invalid value assigned to email for identity with id 02e8194a-f24f-4c29-a565-23ccaf299ca2 and user with id 3f40c364-d8bf-492a-bb61-c909cb55ccb7" error_message="[813moP0E] 400 invalid_request: invalid value assigned to email for identity with id 02e8194a-f24f-4c29-a565-23ccaf299ca2 and user with id 3f40c364-d8bf-492a-bb61-c909cb55ccb7" identity_id=02e8194a-f24f-4c29-a565-23ccaf299ca2 pkg=jsonapi req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key 02e8194a-f24f-4c29-a565-23ccaf299ca2" hook_name="mighti:record-aa739cfa-876e-4ff6-9a35-c80384042ca5" key=02e8194a-f24f-4c29-a565-23ccaf299ca2 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key 3f40c364-d8bf-492a-bb61-c909cb55ccb7" hook_name="mighti:record-aa739cfa-876e-4ff6-9a35-c80384042ca5" key=3f40c364-d8bf-492a-bb61-c909cb55ccb7 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-aa739cfa-876e-4ff6-9a35-c80384042ca5` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestUpdateUserWithInvalidEmail (0.01s)
=== RUN   TestUpdateUserWithInvalidUsername
time="2017-08-18T10:14:59+07:00" level=info msg="Identity created!" identity_id=d1005525-a846-4c5c-b21c-43c4b1cafa46 pkg=account req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="an error occurred in our api" err="[aiONPdnR] 400 invalid_request: invalid value assigned to username for identity with id d1005525-a846-4c5c-b21c-43c4b1cafa46 and user with id 54b718a3-3bb7-4850-9f10-7fe44aa72a92" error_message="[aiONPdnR] 400 invalid_request: invalid value assigned to username for identity with id d1005525-a846-4c5c-b21c-43c4b1cafa46 and user with id 54b718a3-3bb7-4850-9f10-7fe44aa72a92" identity_id=d1005525-a846-4c5c-b21c-43c4b1cafa46 pkg=jsonapi req_id= 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'identities' table with key d1005525-a846-4c5c-b21c-43c4b1cafa46" hook_name="mighti:record-c41ae581-c83d-4c19-9998-a02406300bd1" key=d1005525-a846-4c5c-b21c-43c4b1cafa46 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=identities 
time="2017-08-18T10:14:59+07:00" level=info msg="Deleting entities from 'users' table with key 54b718a3-3bb7-4850-9f10-7fe44aa72a92" hook_name="mighti:record-c41ae581-c83d-4c19-9998-a02406300bd1" key=54b718a3-3bb7-4850-9f10-7fe44aa72a92 pkg="gormsupport/cleaner.DeleteCreatedEntities" table=users 
[info] removing callback `mighti:record-c41ae581-c83d-4c19-9998-a02406300bd1` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestUpdateUserWithInvalidUsername (0.01s)
--- PASS: TestUsers (0.73s)
--- SKIP: TestCopyExistingKeycloakUserProfileInfo (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
PASS
ok  	github.com/fabric8-services/fabric8-auth/controller	1.559s
=== RUN   TestDummyEqualerEqual
--- SKIP: TestDummyEqualerEqual (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
PASS
ok  	github.com/fabric8-services/fabric8-auth/convert	0.018s
=== RUN   TestGetParent
--- SKIP: TestGetParent (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestIterator
--- SKIP: TestIterator (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
PASS
ok  	github.com/fabric8-services/fabric8-auth/criteria	0.011s
=== RUN   TestSimpleError_Error
=== RUN   TestBadParameterError_Error
=== RUN   TestNotFoundError_Error
=== RUN   TestNewInternalError
=== RUN   TestNewConversionError
=== RUN   TestNewBadParameterError
=== RUN   TestNewNotFoundError
=== RUN   TestNewUnauthorizedError
=== RUN   TestNewForbiddenError
=== RUN   TestIsXYError
--- SKIP: TestIsXYError (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
--- SKIP: TestSimpleError_Error (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
--- SKIP: TestNewForbiddenError (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
--- SKIP: TestNewUnauthorizedError (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
--- SKIP: TestNewNotFoundError (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
--- SKIP: TestNewBadParameterError (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
--- SKIP: TestNewConversionError (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
--- SKIP: TestNewInternalError (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
--- SKIP: TestNotFoundError_Error (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
--- SKIP: TestBadParameterError_Error (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
PASS
ok  	github.com/fabric8-services/fabric8-auth/errors	0.019s
?   	github.com/fabric8-services/fabric8-auth/goasupport	[no test files]
?   	github.com/fabric8-services/fabric8-auth/goasupport/conditional_request	[no test files]
=== RUN   TestLifecycle_Equal
--- SKIP: TestLifecycle_Equal (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
PASS
ok  	github.com/fabric8-services/fabric8-auth/gormsupport	0.020s
?   	github.com/fabric8-services/fabric8-auth/gormsupport/cleaner	[no test files]
=== RUN   TestErrorToJSONAPIError
--- SKIP: TestErrorToJSONAPIError (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
PASS
ok  	github.com/fabric8-services/fabric8-auth/jsonapi	0.005s
=== RUN   TestInfo
--- PASS: TestInfo (0.00s)
=== RUN   TestInfoWithFields
--- PASS: TestInfoWithFields (0.00s)
=== RUN   TestWarn
--- PASS: TestWarn (0.00s)
=== RUN   TestDebug
--- PASS: TestDebug (0.00s)
=== RUN   TestDebugMsgFieldHasPrefix
--- PASS: TestDebugMsgFieldHasPrefix (0.00s)
=== RUN   TestInfoMsgFieldHasPrefix
--- PASS: TestInfoMsgFieldHasPrefix (0.00s)
PASS
ok  	github.com/fabric8-services/fabric8-auth/log	0.010s
=== RUN   TestValidOAuthAccessToken
--- SKIP: TestValidOAuthAccessToken (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestInvalidOAuthAccessToken
--- SKIP: TestInvalidOAuthAccessToken (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestCheckClaimsOK
=== RUN   TestCheckClaimsFails
=== RUN   TestGravatarURLGeneration
=== RUN   TestEncodeTokenOK
=== RUN   TestInt32ToInt64OK
--- PASS: TestInt32ToInt64OK (0.00s)
=== RUN   TestInt64ToInt64OK
--- PASS: TestInt64ToInt64OK (0.00s)
=== RUN   TestFloat32ToInt64OK
--- PASS: TestFloat32ToInt64OK (0.00s)
=== RUN   TestFloat64ToInt64OK
--- PASS: TestFloat64ToInt64OK (0.00s)
=== RUN   TestStringToInt64OK
--- PASS: TestStringToInt64OK (0.00s)
=== RUN   TestApprovedUserOK
=== RUN   TestNotApprovedUserFails
=== RUN   TestFillUserDoesntOverwriteExistingImageURL
=== RUN   TestLogout
--- SKIP: TestLogout (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestRunProfileBlackBoxTest
--- SKIP: TestRunProfileBlackBoxTest (0.00s)
	require.go:53: Skipping test because environment variable AUTH_RESOURCE_REMOTE is no set.
=== RUN   TestRunServiceBlackBoxTest
=== RUN   TestInvalidOAuthAuthorizationCode
time="2017-08-18T10:14:56+07:00" level=info msg="Oauth state reference created successfully" oauth_state_reference_id=276c8520-e41d-48c1-b7ce-bc4879a86947 pkg=auth req_id= 
time="2017-08-18T10:14:58+07:00" level=error msg="keycloak exchange operation failed" code="INVALID_OAUTH2.0_CODE" err="oauth2: cannot fetch token: 400 Bad Request\nResponse: {\"error\":\"invalid_grant\",\"error_description\":\"Code not valid\"}" file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/login/service.go" func="github.com/fabric8-services/fabric8-auth/login.(*KeycloakOAuthProvider).Perform" line=130 pid=5649 pkg=login req_headers=map[Referer:[https://keycloak-url.example.org/path-of-login]] req_id= req_params=map[state:[276c8520-e41d-48c1-b7ce-bc4879a86947] code:[INVALID_OAUTH2.0_CODE]] 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'oauth_state_references' table with key 276c8520-e41d-48c1-b7ce-bc4879a86947" hook_name="mighti:record" key=276c8520-e41d-48c1-b7ce-bc4879a86947 pkg="gormsupport/cleaner.DeleteCreatedEntities" table="oauth_state_references" 
[info] removing callback `mighti:record` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestInvalidOAuthAuthorizationCode (1.58s)
=== RUN   TestInvalidState
time="2017-08-18T10:14:58+07:00" level=error msg="unable to convert oauth state to uuid" err="uuid: UUID string too short: " file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/login/service.go" func="github.com/fabric8-services/fabric8-auth/login.(*KeycloakOAuthProvider).getReferrer" line=512 pid=5649 pkg=login req_headers=map[Referer:[https://keycloak-url.example.org/path-of-login]] req_id= req_params=map[state:[] code:[doesnt_matter_what_is_here]] state= 
time="2017-08-18T10:14:58+07:00" level=error msg="uknown state" err="Unable to convert oauth state to uuid. uuid: UUID string too short: " file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/login/service.go" func="github.com/fabric8-services/fabric8-auth/login.(*KeycloakOAuthProvider).Perform" line=114 pid=5649 pkg=login req_headers=map[Referer:[https://keycloak-url.example.org/path-of-login]] req_id= req_params=map[state:[] code:[doesnt_matter_what_is_here]] state= 
time="2017-08-18T10:14:58+07:00" level=info msg="an error occurred in our api" err="[aLjQhRcW] 401 unauthorized: uknown state. Unable to convert oauth state to uuid. uuid: UUID string too short: " error_message="[aLjQhRcW] 401 unauthorized: uknown state. Unable to convert oauth state to uuid. uuid: UUID string too short: " pkg=jsonapi req_id= 
[info] removing callback `mighti:record-731248d2-9c6b-428b-88d4-a99353cace35` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestInvalidState (0.00s)
=== RUN   TestKeycloakAuthorizationRedirect
time="2017-08-18T10:14:58+07:00" level=info msg="Oauth state reference created successfully" oauth_state_reference_id=f62bf172-25b0-4312-aa9f-84a6907ef1e4 pkg=auth req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'oauth_state_references' table with key f62bf172-25b0-4312-aa9f-84a6907ef1e4" hook_name="mighti:record-51a156e9-8a7e-492b-a4ce-797c26946ae3" key=f62bf172-25b0-4312-aa9f-84a6907ef1e4 pkg="gormsupport/cleaner.DeleteCreatedEntities" table="oauth_state_references" 
[info] removing callback `mighti:record-51a156e9-8a7e-492b-a4ce-797c26946ae3` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestKeycloakAuthorizationRedirect (0.01s)
=== RUN   TestKeycloakAuthorizationRedirectsToRedirectParam
time="2017-08-18T10:14:58+07:00" level=info msg="Oauth state reference created successfully" oauth_state_reference_id=2ce54f14-6371-40a4-b0d5-fbe6e76847f2 pkg=auth req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'oauth_state_references' table with key 2ce54f14-6371-40a4-b0d5-fbe6e76847f2" hook_name="mighti:record-42aa7a61-4345-4780-a6a1-f43dd88c1808" key=2ce54f14-6371-40a4-b0d5-fbe6e76847f2 pkg="gormsupport/cleaner.DeleteCreatedEntities" table="oauth_state_references" 
[info] removing callback `mighti:record-42aa7a61-4345-4780-a6a1-f43dd88c1808` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestKeycloakAuthorizationRedirectsToRedirectParam (0.01s)
=== RUN   TestKeycloakAuthorizationWithNoRefererAndRedirectParamFails
time="2017-08-18T10:14:58+07:00" level=info msg="an error occurred in our api" err="[uB5Cn4HI] 400 bad_request: Referer Header and redirect param are both empty. At least one should be specified." error_message="[uB5Cn4HI] 400 bad_request: Referer Header and redirect param are both empty. At least one should be specified." pkg=jsonapi req_id= 
[info] removing callback `mighti:record-7636f464-da55-4a57-b313-681db903f027` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestKeycloakAuthorizationWithNoRefererAndRedirectParamFails (0.00s)
=== RUN   TestKeycloakAuthorizationWithNoValidRefererFails
time="2017-08-18T10:14:58+07:00" level=error msg="Referrer not valid" file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/login/service.go" func="github.com/fabric8-services/fabric8-auth/login.(*KeycloakOAuthProvider).saveReferrer" line=479 pid=5649 pkg=login referrer="http://notauthorized.domain.com" req_id= req_params=map[redirect:[http://notauthorized.domain.com]] valid_referrer_url="^(https|http)://([^/]+[.])?(?i:openshift[.]io)(/.*)?$" 
time="2017-08-18T10:14:58+07:00" level=info msg="an error occurred in our api" err="[gMWPvj2F] 400 bad_request: Not valid redirect URL" error_message="[gMWPvj2F] 400 bad_request: Not valid redirect URL" pkg=jsonapi req_id= 
time="2017-08-18T10:14:58+07:00" level=error msg="unable to save the state" err="No encoder registered for  and no default encoder" file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/login/service.go" func="github.com/fabric8-services/fabric8-auth/login.(*KeycloakOAuthProvider).Perform" line=290 pid=5649 pkg=login redirect=0xc42025cdc0 referrer= req_id= req_params=map[redirect:[http://notauthorized.domain.com]] state=1cef051e-7ac8-4aa2-b984-8ef2b6e3ebf7 
time="2017-08-18T10:14:58+07:00" level=info msg="Oauth state reference created successfully" oauth_state_reference_id=2fa0c62e-7b5e-4478-89db-1a37bc9437ea pkg=auth req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Oauth state reference created successfully" oauth_state_reference_id=b8f4c608-4ccf-4b65-a6bb-b1b7fa28f1fa pkg=auth req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'oauth_state_references' table with key b8f4c608-4ccf-4b65-a6bb-b1b7fa28f1fa" hook_name="mighti:record-b280c429-2d1e-4c83-8803-9d998af0b9bc" key=b8f4c608-4ccf-4b65-a6bb-b1b7fa28f1fa pkg="gormsupport/cleaner.DeleteCreatedEntities" table="oauth_state_references" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'oauth_state_references' table with key 2fa0c62e-7b5e-4478-89db-1a37bc9437ea" hook_name="mighti:record-b280c429-2d1e-4c83-8803-9d998af0b9bc" key=2fa0c62e-7b5e-4478-89db-1a37bc9437ea pkg="gormsupport/cleaner.DeleteCreatedEntities" table="oauth_state_references" 
[info] removing callback `mighti:record-b280c429-2d1e-4c83-8803-9d998af0b9bc` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestKeycloakAuthorizationWithNoValidRefererFails (0.02s)
=== RUN   TestKeycloakLinkRedirect
time="2017-08-18T10:14:58+07:00" level=info msg="Oauth state reference created successfully" oauth_state_reference_id=971789f4-8724-49e7-8a6f-ed495a423ee6 pkg=auth req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Oauth state reference created successfully" oauth_state_reference_id=032cd898-fb77-4383-970c-371eff29e210 pkg=auth req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Oauth state reference created successfully" oauth_state_reference_id=7ac32880-7e0b-4a50-a7d1-e3979aebc4b5 pkg=auth req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Oauth state reference created successfully" oauth_state_reference_id=55112985-4685-487b-b1a8-2822c9e88445 pkg=auth req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Oauth state reference created successfully" oauth_state_reference_id=1189210e-938f-4780-962d-5e59458643bd pkg=auth req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Oauth state reference created successfully" oauth_state_reference_id=2cb9689f-15e7-4beb-bb4f-e328820ab679 pkg=auth req_id= 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'oauth_state_references' table with key 2cb9689f-15e7-4beb-bb4f-e328820ab679" hook_name="mighti:record-b9eeb2d1-793a-4f65-9b94-03aa2607f40d" key=2cb9689f-15e7-4beb-bb4f-e328820ab679 pkg="gormsupport/cleaner.DeleteCreatedEntities" table="oauth_state_references" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'oauth_state_references' table with key 1189210e-938f-4780-962d-5e59458643bd" hook_name="mighti:record-b9eeb2d1-793a-4f65-9b94-03aa2607f40d" key=1189210e-938f-4780-962d-5e59458643bd pkg="gormsupport/cleaner.DeleteCreatedEntities" table="oauth_state_references" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'oauth_state_references' table with key 55112985-4685-487b-b1a8-2822c9e88445" hook_name="mighti:record-b9eeb2d1-793a-4f65-9b94-03aa2607f40d" key=55112985-4685-487b-b1a8-2822c9e88445 pkg="gormsupport/cleaner.DeleteCreatedEntities" table="oauth_state_references" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'oauth_state_references' table with key 7ac32880-7e0b-4a50-a7d1-e3979aebc4b5" hook_name="mighti:record-b9eeb2d1-793a-4f65-9b94-03aa2607f40d" key=7ac32880-7e0b-4a50-a7d1-e3979aebc4b5 pkg="gormsupport/cleaner.DeleteCreatedEntities" table="oauth_state_references" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'oauth_state_references' table with key 032cd898-fb77-4383-970c-371eff29e210" hook_name="mighti:record-b9eeb2d1-793a-4f65-9b94-03aa2607f40d" key=032cd898-fb77-4383-970c-371eff29e210 pkg="gormsupport/cleaner.DeleteCreatedEntities" table="oauth_state_references" 
time="2017-08-18T10:14:58+07:00" level=info msg="Deleting entities from 'oauth_state_references' table with key 971789f4-8724-49e7-8a6f-ed495a423ee6" hook_name="mighti:record-b9eeb2d1-793a-4f65-9b94-03aa2607f40d" key=971789f4-8724-49e7-8a6f-ed495a423ee6 pkg="gormsupport/cleaner.DeleteCreatedEntities" table="oauth_state_references" 
[info] removing callback `mighti:record-b9eeb2d1-793a-4f65-9b94-03aa2607f40d` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestKeycloakLinkRedirect (0.04s)
--- PASS: TestRunServiceBlackBoxTest (1.66s)
--- SKIP: TestCheckClaimsOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
--- SKIP: TestNotApprovedUserFails (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
--- SKIP: TestApprovedUserOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
--- SKIP: TestEncodeTokenOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
--- SKIP: TestFillUserDoesntOverwriteExistingImageURL (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
--- SKIP: TestGravatarURLGeneration (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
--- SKIP: TestCheckClaimsFails (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
PASS
ok  	github.com/fabric8-services/fabric8-auth/login	1.663s
?   	github.com/fabric8-services/fabric8-auth/login/tokencontext	[no test files]
=== RUN   TestConcurrentMigrations
time="2017-08-18T10:14:54+07:00" level=info msg="Current version 4. Nothing to update." current_version=4 next_version=5 pkg=migration 
time="2017-08-18T10:14:54+07:00" level=info msg="Current version 4. Nothing to update." current_version=4 next_version=5 pkg=migration 
time="2017-08-18T10:14:54+07:00" level=info msg="Current version 4. Nothing to update." current_version=4 next_version=5 pkg=migration 
time="2017-08-18T10:14:54+07:00" level=info msg="Current version 4. Nothing to update." current_version=4 next_version=5 pkg=migration 
time="2017-08-18T10:14:54+07:00" level=info msg="Current version 4. Nothing to update." current_version=4 next_version=5 pkg=migration 
time="2017-08-18T10:14:54+07:00" level=info msg="Current version 4. Nothing to update." current_version=4 next_version=5 pkg=migration 
time="2017-08-18T10:14:54+07:00" level=info msg="Current version 4. Nothing to update." current_version=4 next_version=5 pkg=migration 
time="2017-08-18T10:14:54+07:00" level=info msg="Current version 4. Nothing to update." current_version=4 next_version=5 pkg=migration 
time="2017-08-18T10:14:54+07:00" level=info msg="Current version 4. Nothing to update." current_version=4 next_version=5 pkg=migration 
time="2017-08-18T10:14:54+07:00" level=info msg="Current version 4. Nothing to update." current_version=4 next_version=5 pkg=migration 
time="2017-08-18T10:14:54+07:00" level=info msg="Current version 4. Nothing to update." current_version=4 next_version=5 pkg=migration 
time="2017-08-18T10:14:54+07:00" level=info msg="Current version 4. Nothing to update." current_version=4 next_version=5 pkg=migration 
time="2017-08-18T10:14:54+07:00" level=info msg="Current version 4. Nothing to update." current_version=4 next_version=5 pkg=migration 
time="2017-08-18T10:14:54+07:00" level=info msg="Current version 4. Nothing to update." current_version=4 next_version=5 pkg=migration 
time="2017-08-18T10:14:55+07:00" level=info msg="Current version 4. Nothing to update." current_version=4 next_version=5 pkg=migration 
time="2017-08-18T10:14:55+07:00" level=info msg="Current version 4. Nothing to update." current_version=4 next_version=5 pkg=migration 
time="2017-08-18T10:14:55+07:00" level=info msg="Current version 4. Nothing to update." current_version=4 next_version=5 pkg=migration 
time="2017-08-18T10:14:55+07:00" level=info msg="Current version 4. Nothing to update." current_version=4 next_version=5 pkg=migration 
time="2017-08-18T10:14:55+07:00" level=info msg="Current version 4. Nothing to update." current_version=4 next_version=5 pkg=migration 
time="2017-08-18T10:14:55+07:00" level=info msg="Current version 4. Nothing to update." current_version=4 next_version=5 pkg=migration 
--- PASS: TestConcurrentMigrations (0.13s)
=== RUN   TestMigrations
=== RUN   TestMigrations/TestMigration01
time="2017-08-18T10:14:55+07:00" level=info msg="Attempt to update DB to version 0" current_version=-1 next_version=0 pkg=migration 
time="2017-08-18T10:14:55+07:00" level=info msg="Successfully updated DB to version 0" current_version=-1 next_version=0 pkg=migration 
time="2017-08-18T10:14:55+07:00" level=info msg="Attempt to update DB to version 1" current_version=0 next_version=1 pkg=migration 
time="2017-08-18T10:14:55+07:00" level=info msg="Successfully updated DB to version 1" current_version=0 next_version=1 pkg=migration 
time="2017-08-18T10:14:55+07:00" level=info msg="Executing SQL test script '001-insert-identities-users.sql'" pkg="migration_test.executeSQLTestFile" 
=== RUN   TestMigrations/TestMigration02
time="2017-08-18T10:14:55+07:00" level=info msg="Attempt to update DB to version 2" current_version=1 next_version=2 pkg=migration 
time="2017-08-18T10:14:55+07:00" level=info msg="Successfully updated DB to version 2" current_version=1 next_version=2 pkg=migration 
time="2017-08-18T10:14:55+07:00" level=info msg="Executing SQL test script '002-insert-oauth-states.sql'" pkg="migration_test.executeSQLTestFile" 
time="2017-08-18T10:14:55+07:00" level=info msg="Attempt to update DB to version 3" current_version=2 next_version=3 pkg=migration 
time="2017-08-18T10:14:55+07:00" level=info msg="Successfully updated DB to version 3" current_version=2 next_version=3 pkg=migration 
time="2017-08-18T10:14:55+07:00" level=info msg="Attempt to update DB to version 4" current_version=3 next_version=4 pkg=migration 
time="2017-08-18T10:14:55+07:00" level=info msg="Successfully updated DB to version 4" current_version=3 next_version=4 pkg=migration 
--- PASS: TestMigrations (0.67s)
    --- PASS: TestMigrations/TestMigration01 (0.14s)
    --- PASS: TestMigrations/TestMigration02 (0.03s)
PASS
ok  	github.com/fabric8-services/fabric8-auth/migration	0.829s
?   	github.com/fabric8-services/fabric8-auth/models	[no test files]
=== RUN   TestIsEmpty
--- SKIP: TestIsEmpty (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestThis
--- SKIP: TestThis (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestConvert
--- SKIP: TestConvert (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestToString
--- SKIP: TestToString (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestRoot
--- SKIP: TestRoot (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestParent
--- SKIP: TestParent (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestValuerImplementation
--- SKIP: TestValuerImplementation (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestScannerImplementation
--- SKIP: TestScannerImplementation (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestToExpression
--- SKIP: TestToExpression (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
PASS
ok  	github.com/fabric8-services/fabric8-auth/path	0.019s
?   	github.com/fabric8-services/fabric8-auth/query/simple	[no test files]
?   	github.com/fabric8-services/fabric8-auth/resource	[no test files]
=== RUN   TestAbsoluteURLOK
--- SKIP: TestAbsoluteURLOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestAbsoluteURLOKWithProxyForward
--- SKIP: TestAbsoluteURLOKWithProxyForward (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestReplaceDomainPrefixOK
--- SKIP: TestReplaceDomainPrefixOK (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestReplaceDomainPrefixInTooShortHostFails
--- SKIP: TestReplaceDomainPrefixInTooShortHostFails (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
PASS
ok  	github.com/fabric8-services/fabric8-auth/rest	0.006s
=== RUN   TestRunResourceRepoBBTest
=== RUN   TestCreate
time="2017-08-18T10:14:55+07:00" level=info msg="Space resource created successfully" pkg=space req_id= space_resource_id=5907ff52-1908-4f8b-93eb-1d3e987e9434 
time="2017-08-18T10:14:55+07:00" level=info msg="Deleting entities from 'space_resources' table with key 5907ff52-1908-4f8b-93eb-1d3e987e9434" hook_name="mighti:record" key=5907ff52-1908-4f8b-93eb-1d3e987e9434 pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
[info] removing callback `mighti:record` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestCreate (0.02s)
=== RUN   TestDelete
time="2017-08-18T10:14:55+07:00" level=info msg="Space resource created successfully" pkg=space req_id= space_resource_id=dc5ac375-dbc9-442d-8fa9-8fbaeb28d495 
time="2017-08-18T10:14:55+07:00" level=error msg="state or known referer was empty" file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/space/space_resource.go" func="github.com/fabric8-services/fabric8-auth/space.(*GormResourceRepository).Load" line=85 pid=5444 pkg=space req_id= space_resource_id=dc5ac375-dbc9-442d-8fa9-8fbaeb28d495 
time="2017-08-18T10:14:55+07:00" level=error msg="none row was affected by the deletion operation" file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/space/space_resource.go" func="github.com/fabric8-services/fabric8-auth/space.(*GormResourceRepository).Delete" line=122 pid=5444 pkg=space req_id= space_resource_id=9b4ad552-658d-4e0c-8a5a-c8d8b9bfff14 
time="2017-08-18T10:14:55+07:00" level=error msg="unable to find the space resource by ID" file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/space/space_resource.go" func="github.com/fabric8-services/fabric8-auth/space.(*GormResourceRepository).Delete" line=107 pid=5444 pkg=space req_id= space_resource_id=00000000-0000-0000-0000-000000000000 
time="2017-08-18T10:14:55+07:00" level=info msg="Deleting entities from 'space_resources' table with key dc5ac375-dbc9-442d-8fa9-8fbaeb28d495" hook_name="mighti:record-2ed76e8e-35e0-4846-be36-b6456852f115" key=dc5ac375-dbc9-442d-8fa9-8fbaeb28d495 pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
[info] removing callback `mighti:record-2ed76e8e-35e0-4846-be36-b6456852f115` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestDelete (0.03s)
=== RUN   TestExistsSpaceResource
=== RUN   TestExistsSpaceResource/space_resource_exists
time="2017-08-18T10:14:55+07:00" level=error msg="state or known referer was empty" file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/space/space_resource.go" func="github.com/fabric8-services/fabric8-auth/space.(*GormResourceRepository).Load" line=85 pid=5444 pkg=space req_id= space_resource_id=d8d0e50e-7c2f-44dd-afad-6dd5579a9449 
time="2017-08-18T10:14:55+07:00" level=info msg="Space resource created successfully" pkg=space req_id= space_resource_id=3d4de1dc-e6ce-4358-8653-4166446684a2 
=== RUN   TestExistsSpaceResource/space_resource_doesn't_exist
time="2017-08-18T10:14:55+07:00" level=info msg="Deleting entities from 'space_resources' table with key 3d4de1dc-e6ce-4358-8653-4166446684a2" hook_name="mighti:record-3850b0a7-1109-453f-8cca-0f3679b0dd89" key=3d4de1dc-e6ce-4358-8653-4166446684a2 pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
[info] removing callback `mighti:record-3850b0a7-1109-453f-8cca-0f3679b0dd89` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestExistsSpaceResource (0.01s)
    --- PASS: TestExistsSpaceResource/space_resource_exists (0.01s)
    --- PASS: TestExistsSpaceResource/space_resource_doesn't_exist (0.00s)
=== RUN   TestLoad
time="2017-08-18T10:14:55+07:00" level=error msg="state or known referer was empty" file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/space/space_resource.go" func="github.com/fabric8-services/fabric8-auth/space.(*GormResourceRepository).Load" line=85 pid=5444 pkg=space req_id= space_resource_id=811c5a49-180e-491d-bcf5-8648caae7f44 
time="2017-08-18T10:14:55+07:00" level=info msg="Space resource created successfully" pkg=space req_id= space_resource_id=7ddca164-51a4-493e-b024-20b8395e1986 
time="2017-08-18T10:14:55+07:00" level=info msg="Deleting entities from 'space_resources' table with key 7ddca164-51a4-493e-b024-20b8395e1986" hook_name="mighti:record-089eb644-6a9b-4a0f-9be9-8dc87db33815" key=7ddca164-51a4-493e-b024-20b8395e1986 pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
[info] removing callback `mighti:record-089eb644-6a9b-4a0f-9be9-8dc87db33815` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestLoad (0.02s)
=== RUN   TestLoadByDifferentSpaceFails
time="2017-08-18T10:14:55+07:00" level=error msg="Could not find space resource by space ID" file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/space/space_resource.go" func="github.com/fabric8-services/fabric8-auth/space.(*GormResourceRepository).LoadBySpace" line=190 pid=5444 pkg=space req_id= space_id=37598a26-910e-4dd1-83c5-5dfdb4832d19 
[info] removing callback `mighti:record-0b4520d9-0eae-4b4e-8269-07f4a4040d70` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestLoadByDifferentSpaceFails (0.00s)
=== RUN   TestLoadBySpace
time="2017-08-18T10:14:55+07:00" level=error msg="state or known referer was empty" file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/space/space_resource.go" func="github.com/fabric8-services/fabric8-auth/space.(*GormResourceRepository).Load" line=85 pid=5444 pkg=space req_id= space_resource_id=ddeaf201-4d90-4c1d-94db-390bc147205b 
time="2017-08-18T10:14:55+07:00" level=info msg="Space resource created successfully" pkg=space req_id= space_resource_id=6f227069-908d-40b3-996a-dc9230583721 
time="2017-08-18T10:14:55+07:00" level=info msg="Deleting entities from 'space_resources' table with key 6f227069-908d-40b3-996a-dc9230583721" hook_name="mighti:record-30218cc6-0cb6-4a13-9f48-7d8150a8e7e7" key=6f227069-908d-40b3-996a-dc9230583721 pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
[info] removing callback `mighti:record-30218cc6-0cb6-4a13-9f48-7d8150a8e7e7` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestLoadBySpace (0.01s)
=== RUN   TestSaveNew
time="2017-08-18T10:14:55+07:00" level=error msg="unable to find the space resource by ID" file="/home/shane/go/src/github.com/fabric8-services/fabric8-auth/space/space_resource.go" func="github.com/fabric8-services/fabric8-auth/space.(*GormResourceRepository).Save" line=138 pid=5444 pkg=space req_id= space_resource_id=d106de8c-151b-49fd-a460-502868ba77e3 
[info] removing callback `mighti:record-2a53e91b-f3c8-474e-a8a2-1fc6fcbd03bf` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestSaveNew (0.00s)
=== RUN   TestSaveOk
time="2017-08-18T10:14:55+07:00" level=info msg="Space resource created successfully" pkg=space req_id= space_resource_id=0391dbfc-213e-40e7-a63c-520d5d988790 
time="2017-08-18T10:14:55+07:00" level=info msg="Space resource updated successfully" pkg=space req_id= space_resource_id=0391dbfc-213e-40e7-a63c-520d5d988790 
time="2017-08-18T10:14:55+07:00" level=info msg="Deleting entities from 'space_resources' table with key 0391dbfc-213e-40e7-a63c-520d5d988790" hook_name="mighti:record-960b2aea-4e7d-46a3-88ca-9cdc31b7bc6a" key=0391dbfc-213e-40e7-a63c-520d5d988790 pkg="gormsupport/cleaner.DeleteCreatedEntities" table="space_resources" 
[info] removing callback `mighti:record-960b2aea-4e7d-46a3-88ca-9cdc31b7bc6a` from /home/shane/go/src/github.com/fabric8-services/fabric8-auth/gormsupport/cleaner/db_clean.go:78
--- PASS: TestSaveOk (0.02s)
--- PASS: TestRunResourceRepoBBTest (0.11s)
PASS
ok  	github.com/fabric8-services/fabric8-auth/space	0.119s
=== RUN   TestAuthz
--- SKIP: TestAuthz (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
PASS
ok  	github.com/fabric8-services/fabric8-auth/space/authz	0.015s
=== RUN   TestExtractToken
--- SKIP: TestExtractToken (0.00s)
	require.go:64: Skipping test because environment variable AUTH_RESOURCE_UNIT_TEST evaluates to false: 0
=== RUN   TestExtractWithInvalidToken
--- PASS: TestExtractWithInvalidToken (0.01s)
=== RUN   TestLocateTokenInContex
--- PASS: TestLocateTokenInContex (0.00s)
=== RUN   TestLocateMissingTokenInContext
--- PASS: TestLocateMissingTokenInContext (0.00s)
=== RUN   TestLocateMissingUUIDInTokenInContext
--- PASS: TestLocateMissingUUIDInTokenInContext (0.00s)
=== RUN   TestLocateInvalidUUIDInTokenInContext
--- PASS: TestLocateInvalidUUIDInTokenInContext (0.00s)
PASS
ok  	github.com/fabric8-services/fabric8-auth/token	0.024s
?   	github.com/fabric8-services/fabric8-auth/tool/auth-cli	[no test files]
?   	github.com/fabric8-services/fabric8-auth/tool/wit-cli	[no test files]
.make/test.mk:158: recipe for target 'test-integration-no-coverage' failed
